{"ast":null,"code":"import BoundingRectangle from \"../Core/BoundingRectangle.js\";\nimport defined from \"../Core/defined.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport PixelFormat from \"../Core/PixelFormat.js\";\nimport Framebuffer from \"../Renderer/Framebuffer.js\";\nimport PixelDatatype from \"../Renderer/PixelDatatype.js\";\nimport RenderState from \"../Renderer/RenderState.js\";\nimport Sampler from \"../Renderer/Sampler.js\";\nimport Texture from \"../Renderer/Texture.js\";\nimport BrdfLutGeneratorFS from \"../Shaders/BrdfLutGeneratorFS.js\";\n/**\n * @private\n */\n\nfunction BrdfLutGenerator() {\n  this._framebuffer = undefined;\n  this._colorTexture = undefined;\n  this._drawCommand = undefined;\n}\n\nObject.defineProperties(BrdfLutGenerator.prototype, {\n  colorTexture: {\n    get: function () {\n      return this._colorTexture;\n    }\n  }\n});\n\nfunction createCommand(generator, context) {\n  var framebuffer = generator._framebuffer;\n  var drawCommand = context.createViewportQuadCommand(BrdfLutGeneratorFS, {\n    framebuffer: framebuffer,\n    renderState: RenderState.fromCache({\n      viewport: new BoundingRectangle(0.0, 0.0, 256.0, 256.0)\n    })\n  });\n  generator._drawCommand = drawCommand;\n}\n\nfunction createFramebuffer(generator, context) {\n  var colorTexture = new Texture({\n    context: context,\n    width: 256,\n    height: 256,\n    pixelFormat: PixelFormat.RGBA,\n    pixelDatatype: PixelDatatype.UNSIGNED_BYTE,\n    sampler: Sampler.NEAREST\n  });\n  generator._colorTexture = colorTexture;\n  var framebuffer = new Framebuffer({\n    context: context,\n    colorTextures: [colorTexture],\n    destroyAttachments: false\n  });\n  generator._framebuffer = framebuffer;\n}\n\nBrdfLutGenerator.prototype.update = function (frameState) {\n  if (!defined(this._colorTexture)) {\n    var context = frameState.context;\n    createFramebuffer(this, context);\n    createCommand(this, context);\n\n    this._drawCommand.execute(context);\n\n    this._framebuffer = this._framebuffer && this._framebuffer.destroy();\n    this._drawCommand.shaderProgram = this._drawCommand.shaderProgram && this._drawCommand.shaderProgram.destroy();\n  }\n};\n\nBrdfLutGenerator.prototype.isDestroyed = function () {\n  return false;\n};\n\nBrdfLutGenerator.prototype.destroy = function () {\n  this._colorTexture = this._colorTexture && this._colorTexture.destroy();\n  return destroyObject(this);\n};\n\nexport default BrdfLutGenerator;","map":{"version":3,"sources":["C:/Users/passa/Desktop/WaterDeployTrial/node_modules/cesium/Source/Scene/BrdfLutGenerator.js"],"names":["BoundingRectangle","defined","destroyObject","PixelFormat","Framebuffer","PixelDatatype","RenderState","Sampler","Texture","BrdfLutGeneratorFS","BrdfLutGenerator","_framebuffer","undefined","_colorTexture","_drawCommand","Object","defineProperties","prototype","colorTexture","get","createCommand","generator","context","framebuffer","drawCommand","createViewportQuadCommand","renderState","fromCache","viewport","createFramebuffer","width","height","pixelFormat","RGBA","pixelDatatype","UNSIGNED_BYTE","sampler","NEAREST","colorTextures","destroyAttachments","update","frameState","execute","destroy","shaderProgram","isDestroyed"],"mappings":"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","sourcesContent":["import BoundingRectangle from \"../Core/BoundingRectangle.js\";\nimport defined from \"../Core/defined.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport PixelFormat from \"../Core/PixelFormat.js\";\nimport Framebuffer from \"../Renderer/Framebuffer.js\";\nimport PixelDatatype from \"../Renderer/PixelDatatype.js\";\nimport RenderState from \"../Renderer/RenderState.js\";\nimport Sampler from \"../Renderer/Sampler.js\";\nimport Texture from \"../Renderer/Texture.js\";\nimport BrdfLutGeneratorFS from \"../Shaders/BrdfLutGeneratorFS.js\";\n\n/**\n * @private\n */\nfunction BrdfLutGenerator() {\n  this._framebuffer = undefined;\n  this._colorTexture = undefined;\n  this._drawCommand = undefined;\n}\n\nObject.defineProperties(BrdfLutGenerator.prototype, {\n  colorTexture: {\n    get: function () {\n      return this._colorTexture;\n    },\n  },\n});\n\nfunction createCommand(generator, context) {\n  var framebuffer = generator._framebuffer;\n\n  var drawCommand = context.createViewportQuadCommand(BrdfLutGeneratorFS, {\n    framebuffer: framebuffer,\n    renderState: RenderState.fromCache({\n      viewport: new BoundingRectangle(0.0, 0.0, 256.0, 256.0),\n    }),\n  });\n\n  generator._drawCommand = drawCommand;\n}\n\nfunction createFramebuffer(generator, context) {\n  var colorTexture = new Texture({\n    context: context,\n    width: 256,\n    height: 256,\n    pixelFormat: PixelFormat.RGBA,\n    pixelDatatype: PixelDatatype.UNSIGNED_BYTE,\n    sampler: Sampler.NEAREST,\n  });\n\n  generator._colorTexture = colorTexture;\n\n  var framebuffer = new Framebuffer({\n    context: context,\n    colorTextures: [colorTexture],\n    destroyAttachments: false,\n  });\n\n  generator._framebuffer = framebuffer;\n}\n\nBrdfLutGenerator.prototype.update = function (frameState) {\n  if (!defined(this._colorTexture)) {\n    var context = frameState.context;\n\n    createFramebuffer(this, context);\n    createCommand(this, context);\n    this._drawCommand.execute(context);\n    this._framebuffer = this._framebuffer && this._framebuffer.destroy();\n    this._drawCommand.shaderProgram =\n      this._drawCommand.shaderProgram &&\n      this._drawCommand.shaderProgram.destroy();\n  }\n};\n\nBrdfLutGenerator.prototype.isDestroyed = function () {\n  return false;\n};\n\nBrdfLutGenerator.prototype.destroy = function () {\n  this._colorTexture = this._colorTexture && this._colorTexture.destroy();\n  return destroyObject(this);\n};\nexport default BrdfLutGenerator;\n"]},"metadata":{},"sourceType":"module"}