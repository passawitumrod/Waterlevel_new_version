{"ast":null,"code":"import AssociativeArray from \"../Core/AssociativeArray.js\";\nimport buildModuleUrl from \"../Core/buildModuleUrl.js\";\nimport Check from \"../Core/Check.js\";\nimport Credit from \"../Core/Credit.js\";\nimport defaultValue from \"../Core/defaultValue.js\";\nimport defined from \"../Core/defined.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport Uri from \"../ThirdParty/Uri.js\";\nvar mobileWidth = 576;\nvar lightboxHeight = 100;\nvar textColor = \"#ffffff\";\nvar highlightColor = \"#48b\";\n\nfunction contains(credits, credit) {\n  var len = credits.length;\n\n  for (var i = 0; i < len; i++) {\n    var existingCredit = credits[i];\n\n    if (Credit.equals(existingCredit, credit)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction swapCesiumCredit(creditDisplay) {\n  // We don't want to clutter the screen with the Cesium logo and the Cesium ion\n  // logo at the same time. Since the ion logo is required, we just replace the\n  // Cesium logo or add the logo if the Cesium one was removed.\n  var previousCredit = creditDisplay._previousCesiumCredit;\n  var currentCredit = creditDisplay._currentCesiumCredit;\n\n  if (Credit.equals(currentCredit, previousCredit)) {\n    return;\n  }\n\n  if (defined(previousCredit)) {\n    creditDisplay._cesiumCreditContainer.removeChild(previousCredit.element);\n  }\n\n  if (defined(currentCredit)) {\n    creditDisplay._cesiumCreditContainer.appendChild(currentCredit.element);\n  }\n\n  creditDisplay._previousCesiumCredit = currentCredit;\n}\n\nvar delimiterClassName = \"cesium-credit-delimiter\";\n\nfunction createDelimiterElement(delimiter) {\n  var delimiterElement = document.createElement(\"span\");\n  delimiterElement.textContent = delimiter;\n  delimiterElement.className = delimiterClassName;\n  return delimiterElement;\n}\n\nfunction createCreditElement(element, elementWrapperTagName) {\n  // may need to wrap the credit in another element\n  if (defined(elementWrapperTagName)) {\n    var wrapper = document.createElement(elementWrapperTagName);\n    wrapper._creditId = element._creditId;\n    wrapper.appendChild(element);\n    element = wrapper;\n  }\n\n  return element;\n}\n\nfunction displayCredits(container, credits, delimiter, elementWrapperTagName) {\n  var childNodes = container.childNodes;\n  var domIndex = -1;\n\n  for (var creditIndex = 0; creditIndex < credits.length; ++creditIndex) {\n    var credit = credits[creditIndex];\n\n    if (defined(credit)) {\n      domIndex = creditIndex;\n\n      if (defined(delimiter)) {\n        // credits may be separated by delimiters\n        domIndex *= 2;\n\n        if (creditIndex > 0) {\n          var delimiterDomIndex = domIndex - 1;\n\n          if (childNodes.length <= delimiterDomIndex) {\n            container.appendChild(createDelimiterElement(delimiter));\n          } else {\n            var existingDelimiter = childNodes[delimiterDomIndex];\n\n            if (existingDelimiter.className !== delimiterClassName) {\n              container.replaceChild(createDelimiterElement(delimiter), existingDelimiter);\n            }\n          }\n        }\n      }\n\n      var element = credit.element; // check to see if the correct credit is in the right place\n\n      if (childNodes.length <= domIndex) {\n        container.appendChild(createCreditElement(element, elementWrapperTagName));\n      } else {\n        var existingElement = childNodes[domIndex];\n\n        if (existingElement._creditId !== credit._id) {\n          // not the right credit, swap it in\n          container.replaceChild(createCreditElement(element, elementWrapperTagName), existingElement);\n        }\n      }\n    }\n  } // any remaining nodes in the container are unnecessary\n\n\n  ++domIndex;\n\n  while (domIndex < childNodes.length) {\n    container.removeChild(childNodes[domIndex]);\n  }\n}\n\nfunction styleLightboxContainer(that) {\n  var lightboxCredits = that._lightboxCredits;\n  var width = that.viewport.clientWidth;\n  var height = that.viewport.clientHeight;\n\n  if (width !== that._lastViewportWidth) {\n    if (width < mobileWidth) {\n      lightboxCredits.className = \"cesium-credit-lightbox cesium-credit-lightbox-mobile\";\n      lightboxCredits.style.marginTop = \"0\";\n    } else {\n      lightboxCredits.className = \"cesium-credit-lightbox cesium-credit-lightbox-expanded\";\n      lightboxCredits.style.marginTop = Math.floor((height - lightboxCredits.clientHeight) * 0.5) + \"px\";\n    }\n\n    that._lastViewportWidth = width;\n  }\n\n  if (width >= mobileWidth && height !== that._lastViewportHeight) {\n    lightboxCredits.style.marginTop = Math.floor((height - lightboxCredits.clientHeight) * 0.5) + \"px\";\n    that._lastViewportHeight = height;\n  }\n}\n\nfunction addStyle(selector, styles) {\n  var style = selector + \" {\";\n\n  for (var attribute in styles) {\n    if (styles.hasOwnProperty(attribute)) {\n      style += attribute + \": \" + styles[attribute] + \"; \";\n    }\n  }\n\n  style += \" }\\n\";\n  return style;\n}\n\nfunction appendCss() {\n  var style = \"\";\n  style += addStyle(\".cesium-credit-lightbox-overlay\", {\n    display: \"none\",\n    \"z-index\": \"1\",\n    //must be at least 1 to draw over top other Cesium widgets\n    position: \"absolute\",\n    top: \"0\",\n    left: \"0\",\n    width: \"100%\",\n    height: \"100%\",\n    \"background-color\": \"rgba(80, 80, 80, 0.8)\"\n  });\n  style += addStyle(\".cesium-credit-lightbox\", {\n    \"background-color\": \"#303336\",\n    color: textColor,\n    position: \"relative\",\n    \"min-height\": lightboxHeight + \"px\",\n    margin: \"auto\"\n  });\n  style += addStyle(\".cesium-credit-lightbox > ul > li a, .cesium-credit-lightbox > ul > li a:visited\", {\n    color: textColor\n  });\n  style += addStyle(\".cesium-credit-lightbox > ul > li a:hover\", {\n    color: highlightColor\n  });\n  style += addStyle(\".cesium-credit-lightbox.cesium-credit-lightbox-expanded\", {\n    border: \"1px solid #444\",\n    \"border-radius\": \"5px\",\n    \"max-width\": \"370px\"\n  });\n  style += addStyle(\".cesium-credit-lightbox.cesium-credit-lightbox-mobile\", {\n    height: \"100%\",\n    width: \"100%\"\n  });\n  style += addStyle(\".cesium-credit-lightbox-title\", {\n    padding: \"20px 20px 0 20px\"\n  });\n  style += addStyle(\".cesium-credit-lightbox-close\", {\n    \"font-size\": \"18pt\",\n    cursor: \"pointer\",\n    position: \"absolute\",\n    top: \"0\",\n    right: \"6px\",\n    color: textColor\n  });\n  style += addStyle(\".cesium-credit-lightbox-close:hover\", {\n    color: highlightColor\n  });\n  style += addStyle(\".cesium-credit-lightbox > ul\", {\n    margin: \"0\",\n    padding: \"12px 20px 12px 40px\",\n    \"font-size\": \"13px\"\n  });\n  style += addStyle(\".cesium-credit-lightbox > ul > li\", {\n    \"padding-bottom\": \"6px\"\n  });\n  style += addStyle(\".cesium-credit-lightbox > ul > li *\", {\n    padding: \"0\",\n    margin: \"0\"\n  });\n  style += addStyle(\".cesium-credit-expand-link\", {\n    \"padding-left\": \"5px\",\n    cursor: \"pointer\",\n    \"text-decoration\": \"underline\",\n    color: textColor\n  });\n  style += addStyle(\".cesium-credit-expand-link:hover\", {\n    color: highlightColor\n  });\n  style += addStyle(\".cesium-credit-text\", {\n    color: textColor\n  });\n  style += addStyle(\".cesium-credit-textContainer *, .cesium-credit-logoContainer *\", {\n    display: \"inline\"\n  });\n  var head = document.head;\n  var css = document.createElement(\"style\");\n  css.innerHTML = style;\n  head.insertBefore(css, head.firstChild);\n}\n/**\n * The credit display is responsible for displaying credits on screen.\n *\n * @param {HTMLElement} container The HTML element where credits will be displayed\n * @param {String} [delimiter= ' • '] The string to separate text credits\n * @param {HTMLElement} [viewport=document.body] The HTML element that will contain the credits popup\n *\n * @alias CreditDisplay\n * @constructor\n *\n * @example\n * var creditDisplay = new Cesium.CreditDisplay(creditContainer);\n */\n\n\nfunction CreditDisplay(container, delimiter, viewport) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"container\", container); //>>includeEnd('debug');\n\n  var that = this;\n  viewport = defaultValue(viewport, document.body);\n  var lightbox = document.createElement(\"div\");\n  lightbox.className = \"cesium-credit-lightbox-overlay\";\n  viewport.appendChild(lightbox);\n  var lightboxCredits = document.createElement(\"div\");\n  lightboxCredits.className = \"cesium-credit-lightbox\";\n  lightbox.appendChild(lightboxCredits);\n\n  function hideLightbox(event) {\n    if (lightboxCredits.contains(event.target)) {\n      return;\n    }\n\n    that.hideLightbox();\n  }\n\n  lightbox.addEventListener(\"click\", hideLightbox, false);\n  var title = document.createElement(\"div\");\n  title.className = \"cesium-credit-lightbox-title\";\n  title.textContent = \"Data provided by:\";\n  lightboxCredits.appendChild(title);\n  var closeButton = document.createElement(\"a\");\n  closeButton.onclick = this.hideLightbox.bind(this);\n  closeButton.innerHTML = \"&times;\";\n  closeButton.className = \"cesium-credit-lightbox-close\";\n  lightboxCredits.appendChild(closeButton);\n  var creditList = document.createElement(\"ul\");\n  lightboxCredits.appendChild(creditList);\n  var cesiumCreditContainer = document.createElement(\"div\");\n  cesiumCreditContainer.className = \"cesium-credit-logoContainer\";\n  cesiumCreditContainer.style.display = \"inline\";\n  container.appendChild(cesiumCreditContainer);\n  var screenContainer = document.createElement(\"div\");\n  screenContainer.className = \"cesium-credit-textContainer\";\n  screenContainer.style.display = \"inline\";\n  container.appendChild(screenContainer);\n  var expandLink = document.createElement(\"a\");\n  expandLink.className = \"cesium-credit-expand-link\";\n  expandLink.onclick = this.showLightbox.bind(this);\n  expandLink.textContent = \"Data attribution\";\n  container.appendChild(expandLink);\n  appendCss();\n  var cesiumCredit = Credit.clone(CreditDisplay.cesiumCredit);\n  this._delimiter = defaultValue(delimiter, \" • \");\n  this._screenContainer = screenContainer;\n  this._cesiumCreditContainer = cesiumCreditContainer;\n  this._lastViewportHeight = undefined;\n  this._lastViewportWidth = undefined;\n  this._lightboxCredits = lightboxCredits;\n  this._creditList = creditList;\n  this._lightbox = lightbox;\n  this._hideLightbox = hideLightbox;\n  this._expandLink = expandLink;\n  this._expanded = false;\n  this._defaultCredits = [];\n  this._cesiumCredit = cesiumCredit;\n  this._previousCesiumCredit = undefined;\n  this._currentCesiumCredit = cesiumCredit;\n  this._currentFrameCredits = {\n    screenCredits: new AssociativeArray(),\n    lightboxCredits: new AssociativeArray()\n  };\n  this._defaultCredit = undefined;\n  this.viewport = viewport;\n  /**\n   * The HTML element where credits will be displayed.\n   * @type {HTMLElement}\n   */\n\n  this.container = container;\n}\n/**\n * Adds a credit to the list of current credits to be displayed in the credit container\n *\n * @param {Credit} credit The credit to display\n */\n\n\nCreditDisplay.prototype.addCredit = function (credit) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"credit\", credit); //>>includeEnd('debug');\n\n  if (credit._isIon) {\n    // If this is the an ion logo credit from the ion server\n    // Juse use the default credit (which is identical) to avoid blinking\n    if (!defined(this._defaultCredit)) {\n      this._defaultCredit = Credit.clone(getDefaultCredit());\n    }\n\n    this._currentCesiumCredit = this._defaultCredit;\n    return;\n  }\n\n  if (!credit.showOnScreen) {\n    this._currentFrameCredits.lightboxCredits.set(credit.id, credit);\n  } else {\n    this._currentFrameCredits.screenCredits.set(credit.id, credit);\n  }\n};\n/**\n * Adds credits that will persist until they are removed\n *\n * @param {Credit} credit The credit to added to defaults\n */\n\n\nCreditDisplay.prototype.addDefaultCredit = function (credit) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"credit\", credit); //>>includeEnd('debug');\n\n  var defaultCredits = this._defaultCredits;\n\n  if (!contains(defaultCredits, credit)) {\n    defaultCredits.push(credit);\n  }\n};\n/**\n * Removes a default credit\n *\n * @param {Credit} credit The credit to be removed from defaults\n */\n\n\nCreditDisplay.prototype.removeDefaultCredit = function (credit) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"credit\", credit); //>>includeEnd('debug');\n\n  var defaultCredits = this._defaultCredits;\n  var index = defaultCredits.indexOf(credit);\n\n  if (index !== -1) {\n    defaultCredits.splice(index, 1);\n  }\n};\n\nCreditDisplay.prototype.showLightbox = function () {\n  this._lightbox.style.display = \"block\";\n  this._expanded = true;\n};\n\nCreditDisplay.prototype.hideLightbox = function () {\n  this._lightbox.style.display = \"none\";\n  this._expanded = false;\n};\n/**\n * Updates the credit display before a new frame is rendered.\n */\n\n\nCreditDisplay.prototype.update = function () {\n  if (this._expanded) {\n    styleLightboxContainer(this);\n  }\n};\n/**\n * Resets the credit display to a beginning of frame state, clearing out current credits.\n */\n\n\nCreditDisplay.prototype.beginFrame = function () {\n  var currentFrameCredits = this._currentFrameCredits;\n  var screenCredits = currentFrameCredits.screenCredits;\n  screenCredits.removeAll();\n  var defaultCredits = this._defaultCredits;\n\n  for (var i = 0; i < defaultCredits.length; ++i) {\n    var defaultCredit = defaultCredits[i];\n    screenCredits.set(defaultCredit.id, defaultCredit);\n  }\n\n  currentFrameCredits.lightboxCredits.removeAll();\n\n  if (!Credit.equals(CreditDisplay.cesiumCredit, this._cesiumCredit)) {\n    this._cesiumCredit = Credit.clone(CreditDisplay.cesiumCredit);\n  }\n\n  this._currentCesiumCredit = this._cesiumCredit;\n};\n/**\n * Sets the credit display to the end of frame state, displaying credits from the last frame in the credit container.\n */\n\n\nCreditDisplay.prototype.endFrame = function () {\n  var screenCredits = this._currentFrameCredits.screenCredits.values;\n  displayCredits(this._screenContainer, screenCredits, this._delimiter, undefined);\n  var lightboxCredits = this._currentFrameCredits.lightboxCredits.values;\n  this._expandLink.style.display = lightboxCredits.length > 0 ? \"inline\" : \"none\";\n  displayCredits(this._creditList, lightboxCredits, undefined, \"li\");\n  swapCesiumCredit(this);\n};\n/**\n * Destroys the resources held by this object.  Destroying an object allows for deterministic\n * release of resources, instead of relying on the garbage collector to destroy this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n */\n\n\nCreditDisplay.prototype.destroy = function () {\n  this._lightbox.removeEventListener(\"click\", this._hideLightbox, false);\n\n  this.container.removeChild(this._cesiumCreditContainer);\n  this.container.removeChild(this._screenContainer);\n  this.container.removeChild(this._expandLink);\n  this.viewport.removeChild(this._lightbox);\n  return destroyObject(this);\n};\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n */\n\n\nCreditDisplay.prototype.isDestroyed = function () {\n  return false;\n};\n\nCreditDisplay._cesiumCredit = undefined;\nCreditDisplay._cesiumCreditInitialized = false;\nvar defaultCredit;\n\nfunction getDefaultCredit() {\n  if (!defined(defaultCredit)) {\n    var logo = buildModuleUrl(\"Assets/Images/ion-credit.png\"); // When hosting in a WebView, the base URL scheme is file:// or ms-appx-web://\n    // which is stripped out from the Credit's <img> tag; use the full path instead\n\n    if (!logo.startsWith(\"http://\") && !logo.startsWith(\"https://\")) {\n      var logoUrl = new Uri(logo);\n      logo = logoUrl.getPath();\n    }\n\n    defaultCredit = new Credit('<a href=\"https://cesium.com/\" target=\"_blank\"><img src=\"' + logo + '\" title=\"Cesium ion\"/></a>', true);\n  }\n\n  if (!CreditDisplay._cesiumCreditInitialized) {\n    CreditDisplay._cesiumCredit = defaultCredit;\n    CreditDisplay._cesiumCreditInitialized = true;\n  }\n\n  return defaultCredit;\n}\n\nObject.defineProperties(CreditDisplay, {\n  /**\n   * Gets or sets the Cesium logo credit.\n   * @memberof CreditDisplay\n   * @type {Credit}\n   */\n  cesiumCredit: {\n    get: function () {\n      getDefaultCredit();\n      return CreditDisplay._cesiumCredit;\n    },\n    set: function (value) {\n      CreditDisplay._cesiumCredit = value;\n      CreditDisplay._cesiumCreditInitialized = true;\n    }\n  }\n});\nexport default CreditDisplay;","map":{"version":3,"sources":["C:/Users/passa/Desktop/WaterLevelReact/node_modules/cesium/Source/Scene/CreditDisplay.js"],"names":["AssociativeArray","buildModuleUrl","Check","Credit","defaultValue","defined","destroyObject","Uri","mobileWidth","lightboxHeight","textColor","highlightColor","contains","credits","credit","len","length","i","existingCredit","equals","swapCesiumCredit","creditDisplay","previousCredit","_previousCesiumCredit","currentCredit","_currentCesiumCredit","_cesiumCreditContainer","removeChild","element","appendChild","delimiterClassName","createDelimiterElement","delimiter","delimiterElement","document","createElement","textContent","className","createCreditElement","elementWrapperTagName","wrapper","_creditId","displayCredits","container","childNodes","domIndex","creditIndex","delimiterDomIndex","existingDelimiter","replaceChild","existingElement","_id","styleLightboxContainer","that","lightboxCredits","_lightboxCredits","width","viewport","clientWidth","height","clientHeight","_lastViewportWidth","style","marginTop","Math","floor","_lastViewportHeight","addStyle","selector","styles","attribute","hasOwnProperty","appendCss","display","position","top","left","color","margin","border","padding","cursor","right","head","css","innerHTML","insertBefore","firstChild","CreditDisplay","body","lightbox","hideLightbox","event","target","addEventListener","title","closeButton","onclick","bind","creditList","cesiumCreditContainer","screenContainer","expandLink","showLightbox","cesiumCredit","clone","_delimiter","_screenContainer","undefined","_creditList","_lightbox","_hideLightbox","_expandLink","_expanded","_defaultCredits","_cesiumCredit","_currentFrameCredits","screenCredits","_defaultCredit","prototype","addCredit","_isIon","getDefaultCredit","showOnScreen","set","id","addDefaultCredit","defaultCredits","push","removeDefaultCredit","index","indexOf","splice","update","beginFrame","currentFrameCredits","removeAll","defaultCredit","endFrame","values","destroy","removeEventListener","isDestroyed","_cesiumCreditInitialized","logo","startsWith","logoUrl","getPath","Object","defineProperties","get","value"],"mappings":"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","sourcesContent":["import AssociativeArray from \"../Core/AssociativeArray.js\";\nimport buildModuleUrl from \"../Core/buildModuleUrl.js\";\nimport Check from \"../Core/Check.js\";\nimport Credit from \"../Core/Credit.js\";\nimport defaultValue from \"../Core/defaultValue.js\";\nimport defined from \"../Core/defined.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport Uri from \"../ThirdParty/Uri.js\";\n\nvar mobileWidth = 576;\nvar lightboxHeight = 100;\nvar textColor = \"#ffffff\";\nvar highlightColor = \"#48b\";\n\nfunction contains(credits, credit) {\n  var len = credits.length;\n  for (var i = 0; i < len; i++) {\n    var existingCredit = credits[i];\n    if (Credit.equals(existingCredit, credit)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction swapCesiumCredit(creditDisplay) {\n  // We don't want to clutter the screen with the Cesium logo and the Cesium ion\n  // logo at the same time. Since the ion logo is required, we just replace the\n  // Cesium logo or add the logo if the Cesium one was removed.\n  var previousCredit = creditDisplay._previousCesiumCredit;\n  var currentCredit = creditDisplay._currentCesiumCredit;\n  if (Credit.equals(currentCredit, previousCredit)) {\n    return;\n  }\n\n  if (defined(previousCredit)) {\n    creditDisplay._cesiumCreditContainer.removeChild(previousCredit.element);\n  }\n  if (defined(currentCredit)) {\n    creditDisplay._cesiumCreditContainer.appendChild(currentCredit.element);\n  }\n\n  creditDisplay._previousCesiumCredit = currentCredit;\n}\n\nvar delimiterClassName = \"cesium-credit-delimiter\";\n\nfunction createDelimiterElement(delimiter) {\n  var delimiterElement = document.createElement(\"span\");\n  delimiterElement.textContent = delimiter;\n  delimiterElement.className = delimiterClassName;\n  return delimiterElement;\n}\n\nfunction createCreditElement(element, elementWrapperTagName) {\n  // may need to wrap the credit in another element\n  if (defined(elementWrapperTagName)) {\n    var wrapper = document.createElement(elementWrapperTagName);\n    wrapper._creditId = element._creditId;\n    wrapper.appendChild(element);\n    element = wrapper;\n  }\n  return element;\n}\n\nfunction displayCredits(container, credits, delimiter, elementWrapperTagName) {\n  var childNodes = container.childNodes;\n  var domIndex = -1;\n  for (var creditIndex = 0; creditIndex < credits.length; ++creditIndex) {\n    var credit = credits[creditIndex];\n    if (defined(credit)) {\n      domIndex = creditIndex;\n      if (defined(delimiter)) {\n        // credits may be separated by delimiters\n        domIndex *= 2;\n        if (creditIndex > 0) {\n          var delimiterDomIndex = domIndex - 1;\n          if (childNodes.length <= delimiterDomIndex) {\n            container.appendChild(createDelimiterElement(delimiter));\n          } else {\n            var existingDelimiter = childNodes[delimiterDomIndex];\n            if (existingDelimiter.className !== delimiterClassName) {\n              container.replaceChild(\n                createDelimiterElement(delimiter),\n                existingDelimiter\n              );\n            }\n          }\n        }\n      }\n\n      var element = credit.element;\n\n      // check to see if the correct credit is in the right place\n      if (childNodes.length <= domIndex) {\n        container.appendChild(\n          createCreditElement(element, elementWrapperTagName)\n        );\n      } else {\n        var existingElement = childNodes[domIndex];\n        if (existingElement._creditId !== credit._id) {\n          // not the right credit, swap it in\n          container.replaceChild(\n            createCreditElement(element, elementWrapperTagName),\n            existingElement\n          );\n        }\n      }\n    }\n  }\n\n  // any remaining nodes in the container are unnecessary\n  ++domIndex;\n  while (domIndex < childNodes.length) {\n    container.removeChild(childNodes[domIndex]);\n  }\n}\n\nfunction styleLightboxContainer(that) {\n  var lightboxCredits = that._lightboxCredits;\n  var width = that.viewport.clientWidth;\n  var height = that.viewport.clientHeight;\n  if (width !== that._lastViewportWidth) {\n    if (width < mobileWidth) {\n      lightboxCredits.className =\n        \"cesium-credit-lightbox cesium-credit-lightbox-mobile\";\n      lightboxCredits.style.marginTop = \"0\";\n    } else {\n      lightboxCredits.className =\n        \"cesium-credit-lightbox cesium-credit-lightbox-expanded\";\n      lightboxCredits.style.marginTop =\n        Math.floor((height - lightboxCredits.clientHeight) * 0.5) + \"px\";\n    }\n    that._lastViewportWidth = width;\n  }\n\n  if (width >= mobileWidth && height !== that._lastViewportHeight) {\n    lightboxCredits.style.marginTop =\n      Math.floor((height - lightboxCredits.clientHeight) * 0.5) + \"px\";\n    that._lastViewportHeight = height;\n  }\n}\n\nfunction addStyle(selector, styles) {\n  var style = selector + \" {\";\n  for (var attribute in styles) {\n    if (styles.hasOwnProperty(attribute)) {\n      style += attribute + \": \" + styles[attribute] + \"; \";\n    }\n  }\n  style += \" }\\n\";\n  return style;\n}\n\nfunction appendCss() {\n  var style = \"\";\n  style += addStyle(\".cesium-credit-lightbox-overlay\", {\n    display: \"none\",\n    \"z-index\": \"1\", //must be at least 1 to draw over top other Cesium widgets\n    position: \"absolute\",\n    top: \"0\",\n    left: \"0\",\n    width: \"100%\",\n    height: \"100%\",\n    \"background-color\": \"rgba(80, 80, 80, 0.8)\",\n  });\n\n  style += addStyle(\".cesium-credit-lightbox\", {\n    \"background-color\": \"#303336\",\n    color: textColor,\n    position: \"relative\",\n    \"min-height\": lightboxHeight + \"px\",\n    margin: \"auto\",\n  });\n\n  style += addStyle(\n    \".cesium-credit-lightbox > ul > li a, .cesium-credit-lightbox > ul > li a:visited\",\n    {\n      color: textColor,\n    }\n  );\n\n  style += addStyle(\".cesium-credit-lightbox > ul > li a:hover\", {\n    color: highlightColor,\n  });\n\n  style += addStyle(\".cesium-credit-lightbox.cesium-credit-lightbox-expanded\", {\n    border: \"1px solid #444\",\n    \"border-radius\": \"5px\",\n    \"max-width\": \"370px\",\n  });\n\n  style += addStyle(\".cesium-credit-lightbox.cesium-credit-lightbox-mobile\", {\n    height: \"100%\",\n    width: \"100%\",\n  });\n\n  style += addStyle(\".cesium-credit-lightbox-title\", {\n    padding: \"20px 20px 0 20px\",\n  });\n\n  style += addStyle(\".cesium-credit-lightbox-close\", {\n    \"font-size\": \"18pt\",\n    cursor: \"pointer\",\n    position: \"absolute\",\n    top: \"0\",\n    right: \"6px\",\n    color: textColor,\n  });\n\n  style += addStyle(\".cesium-credit-lightbox-close:hover\", {\n    color: highlightColor,\n  });\n\n  style += addStyle(\".cesium-credit-lightbox > ul\", {\n    margin: \"0\",\n    padding: \"12px 20px 12px 40px\",\n    \"font-size\": \"13px\",\n  });\n\n  style += addStyle(\".cesium-credit-lightbox > ul > li\", {\n    \"padding-bottom\": \"6px\",\n  });\n\n  style += addStyle(\".cesium-credit-lightbox > ul > li *\", {\n    padding: \"0\",\n    margin: \"0\",\n  });\n\n  style += addStyle(\".cesium-credit-expand-link\", {\n    \"padding-left\": \"5px\",\n    cursor: \"pointer\",\n    \"text-decoration\": \"underline\",\n    color: textColor,\n  });\n  style += addStyle(\".cesium-credit-expand-link:hover\", {\n    color: highlightColor,\n  });\n\n  style += addStyle(\".cesium-credit-text\", {\n    color: textColor,\n  });\n\n  style += addStyle(\n    \".cesium-credit-textContainer *, .cesium-credit-logoContainer *\",\n    {\n      display: \"inline\",\n    }\n  );\n\n  var head = document.head;\n  var css = document.createElement(\"style\");\n  css.innerHTML = style;\n  head.insertBefore(css, head.firstChild);\n}\n\n/**\n * The credit display is responsible for displaying credits on screen.\n *\n * @param {HTMLElement} container The HTML element where credits will be displayed\n * @param {String} [delimiter= ' • '] The string to separate text credits\n * @param {HTMLElement} [viewport=document.body] The HTML element that will contain the credits popup\n *\n * @alias CreditDisplay\n * @constructor\n *\n * @example\n * var creditDisplay = new Cesium.CreditDisplay(creditContainer);\n */\nfunction CreditDisplay(container, delimiter, viewport) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"container\", container);\n  //>>includeEnd('debug');\n  var that = this;\n\n  viewport = defaultValue(viewport, document.body);\n\n  var lightbox = document.createElement(\"div\");\n  lightbox.className = \"cesium-credit-lightbox-overlay\";\n  viewport.appendChild(lightbox);\n\n  var lightboxCredits = document.createElement(\"div\");\n  lightboxCredits.className = \"cesium-credit-lightbox\";\n  lightbox.appendChild(lightboxCredits);\n\n  function hideLightbox(event) {\n    if (lightboxCredits.contains(event.target)) {\n      return;\n    }\n    that.hideLightbox();\n  }\n  lightbox.addEventListener(\"click\", hideLightbox, false);\n\n  var title = document.createElement(\"div\");\n  title.className = \"cesium-credit-lightbox-title\";\n  title.textContent = \"Data provided by:\";\n  lightboxCredits.appendChild(title);\n\n  var closeButton = document.createElement(\"a\");\n  closeButton.onclick = this.hideLightbox.bind(this);\n  closeButton.innerHTML = \"&times;\";\n  closeButton.className = \"cesium-credit-lightbox-close\";\n  lightboxCredits.appendChild(closeButton);\n\n  var creditList = document.createElement(\"ul\");\n  lightboxCredits.appendChild(creditList);\n\n  var cesiumCreditContainer = document.createElement(\"div\");\n  cesiumCreditContainer.className = \"cesium-credit-logoContainer\";\n  cesiumCreditContainer.style.display = \"inline\";\n  container.appendChild(cesiumCreditContainer);\n\n  var screenContainer = document.createElement(\"div\");\n  screenContainer.className = \"cesium-credit-textContainer\";\n  screenContainer.style.display = \"inline\";\n  container.appendChild(screenContainer);\n\n  var expandLink = document.createElement(\"a\");\n  expandLink.className = \"cesium-credit-expand-link\";\n  expandLink.onclick = this.showLightbox.bind(this);\n  expandLink.textContent = \"Data attribution\";\n  container.appendChild(expandLink);\n\n  appendCss();\n  var cesiumCredit = Credit.clone(CreditDisplay.cesiumCredit);\n\n  this._delimiter = defaultValue(delimiter, \" • \");\n  this._screenContainer = screenContainer;\n  this._cesiumCreditContainer = cesiumCreditContainer;\n  this._lastViewportHeight = undefined;\n  this._lastViewportWidth = undefined;\n  this._lightboxCredits = lightboxCredits;\n  this._creditList = creditList;\n  this._lightbox = lightbox;\n  this._hideLightbox = hideLightbox;\n  this._expandLink = expandLink;\n  this._expanded = false;\n  this._defaultCredits = [];\n  this._cesiumCredit = cesiumCredit;\n  this._previousCesiumCredit = undefined;\n  this._currentCesiumCredit = cesiumCredit;\n  this._currentFrameCredits = {\n    screenCredits: new AssociativeArray(),\n    lightboxCredits: new AssociativeArray(),\n  };\n  this._defaultCredit = undefined;\n\n  this.viewport = viewport;\n\n  /**\n   * The HTML element where credits will be displayed.\n   * @type {HTMLElement}\n   */\n  this.container = container;\n}\n\n/**\n * Adds a credit to the list of current credits to be displayed in the credit container\n *\n * @param {Credit} credit The credit to display\n */\nCreditDisplay.prototype.addCredit = function (credit) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"credit\", credit);\n  //>>includeEnd('debug');\n\n  if (credit._isIon) {\n    // If this is the an ion logo credit from the ion server\n    // Juse use the default credit (which is identical) to avoid blinking\n    if (!defined(this._defaultCredit)) {\n      this._defaultCredit = Credit.clone(getDefaultCredit());\n    }\n    this._currentCesiumCredit = this._defaultCredit;\n    return;\n  }\n\n  if (!credit.showOnScreen) {\n    this._currentFrameCredits.lightboxCredits.set(credit.id, credit);\n  } else {\n    this._currentFrameCredits.screenCredits.set(credit.id, credit);\n  }\n};\n\n/**\n * Adds credits that will persist until they are removed\n *\n * @param {Credit} credit The credit to added to defaults\n */\nCreditDisplay.prototype.addDefaultCredit = function (credit) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"credit\", credit);\n  //>>includeEnd('debug');\n\n  var defaultCredits = this._defaultCredits;\n  if (!contains(defaultCredits, credit)) {\n    defaultCredits.push(credit);\n  }\n};\n\n/**\n * Removes a default credit\n *\n * @param {Credit} credit The credit to be removed from defaults\n */\nCreditDisplay.prototype.removeDefaultCredit = function (credit) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"credit\", credit);\n  //>>includeEnd('debug');\n\n  var defaultCredits = this._defaultCredits;\n  var index = defaultCredits.indexOf(credit);\n  if (index !== -1) {\n    defaultCredits.splice(index, 1);\n  }\n};\n\nCreditDisplay.prototype.showLightbox = function () {\n  this._lightbox.style.display = \"block\";\n  this._expanded = true;\n};\n\nCreditDisplay.prototype.hideLightbox = function () {\n  this._lightbox.style.display = \"none\";\n  this._expanded = false;\n};\n\n/**\n * Updates the credit display before a new frame is rendered.\n */\nCreditDisplay.prototype.update = function () {\n  if (this._expanded) {\n    styleLightboxContainer(this);\n  }\n};\n\n/**\n * Resets the credit display to a beginning of frame state, clearing out current credits.\n */\nCreditDisplay.prototype.beginFrame = function () {\n  var currentFrameCredits = this._currentFrameCredits;\n\n  var screenCredits = currentFrameCredits.screenCredits;\n  screenCredits.removeAll();\n  var defaultCredits = this._defaultCredits;\n  for (var i = 0; i < defaultCredits.length; ++i) {\n    var defaultCredit = defaultCredits[i];\n    screenCredits.set(defaultCredit.id, defaultCredit);\n  }\n\n  currentFrameCredits.lightboxCredits.removeAll();\n\n  if (!Credit.equals(CreditDisplay.cesiumCredit, this._cesiumCredit)) {\n    this._cesiumCredit = Credit.clone(CreditDisplay.cesiumCredit);\n  }\n  this._currentCesiumCredit = this._cesiumCredit;\n};\n\n/**\n * Sets the credit display to the end of frame state, displaying credits from the last frame in the credit container.\n */\nCreditDisplay.prototype.endFrame = function () {\n  var screenCredits = this._currentFrameCredits.screenCredits.values;\n  displayCredits(\n    this._screenContainer,\n    screenCredits,\n    this._delimiter,\n    undefined\n  );\n\n  var lightboxCredits = this._currentFrameCredits.lightboxCredits.values;\n  this._expandLink.style.display =\n    lightboxCredits.length > 0 ? \"inline\" : \"none\";\n  displayCredits(this._creditList, lightboxCredits, undefined, \"li\");\n\n  swapCesiumCredit(this);\n};\n\n/**\n * Destroys the resources held by this object.  Destroying an object allows for deterministic\n * release of resources, instead of relying on the garbage collector to destroy this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n */\nCreditDisplay.prototype.destroy = function () {\n  this._lightbox.removeEventListener(\"click\", this._hideLightbox, false);\n\n  this.container.removeChild(this._cesiumCreditContainer);\n  this.container.removeChild(this._screenContainer);\n  this.container.removeChild(this._expandLink);\n  this.viewport.removeChild(this._lightbox);\n\n  return destroyObject(this);\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n */\nCreditDisplay.prototype.isDestroyed = function () {\n  return false;\n};\n\nCreditDisplay._cesiumCredit = undefined;\nCreditDisplay._cesiumCreditInitialized = false;\n\nvar defaultCredit;\nfunction getDefaultCredit() {\n  if (!defined(defaultCredit)) {\n    var logo = buildModuleUrl(\"Assets/Images/ion-credit.png\");\n\n    // When hosting in a WebView, the base URL scheme is file:// or ms-appx-web://\n    // which is stripped out from the Credit's <img> tag; use the full path instead\n    if (!logo.startsWith(\"http://\") && !logo.startsWith(\"https://\")) {\n      var logoUrl = new Uri(logo);\n      logo = logoUrl.getPath();\n    }\n\n    defaultCredit = new Credit(\n      '<a href=\"https://cesium.com/\" target=\"_blank\"><img src=\"' +\n        logo +\n        '\" title=\"Cesium ion\"/></a>',\n      true\n    );\n  }\n\n  if (!CreditDisplay._cesiumCreditInitialized) {\n    CreditDisplay._cesiumCredit = defaultCredit;\n    CreditDisplay._cesiumCreditInitialized = true;\n  }\n  return defaultCredit;\n}\n\nObject.defineProperties(CreditDisplay, {\n  /**\n   * Gets or sets the Cesium logo credit.\n   * @memberof CreditDisplay\n   * @type {Credit}\n   */\n  cesiumCredit: {\n    get: function () {\n      getDefaultCredit();\n      return CreditDisplay._cesiumCredit;\n    },\n    set: function (value) {\n      CreditDisplay._cesiumCredit = value;\n      CreditDisplay._cesiumCreditInitialized = true;\n    },\n  },\n});\nexport default CreditDisplay;\n"]},"metadata":{},"sourceType":"module"}