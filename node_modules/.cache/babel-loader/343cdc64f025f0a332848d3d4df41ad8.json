{"ast":null,"code":"import BoundingRectangle from \"../Core/BoundingRectangle.js\";\nimport defined from \"../Core/defined.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport PixelFormat from \"../Core/PixelFormat.js\";\nimport Framebuffer from \"../Renderer/Framebuffer.js\";\nimport PassState from \"../Renderer/PassState.js\";\nimport PixelDatatype from \"../Renderer/PixelDatatype.js\";\nimport Texture from \"../Renderer/Texture.js\";\n/**\n * @private\n */\n\nfunction PickDepthFramebuffer() {\n  this._depthStencilTexture = undefined;\n  this._framebuffer = undefined;\n  this._passState = undefined;\n}\n\nfunction destroyResources(pickDepth) {\n  pickDepth._framebuffer = pickDepth._framebuffer && pickDepth._framebuffer.destroy();\n  pickDepth._depthStencilTexture = pickDepth._depthStencilTexture && pickDepth._depthStencilTexture.destroy();\n}\n\nfunction createResources(pickDepth, context) {\n  var width = context.drawingBufferWidth;\n  var height = context.drawingBufferHeight;\n  pickDepth._depthStencilTexture = new Texture({\n    context: context,\n    width: width,\n    height: height,\n    pixelFormat: PixelFormat.DEPTH_STENCIL,\n    pixelDatatype: PixelDatatype.UNSIGNED_INT_24_8\n  });\n  pickDepth._framebuffer = new Framebuffer({\n    context: context,\n    depthStencilTexture: pickDepth._depthStencilTexture,\n    destroyAttachments: false\n  });\n  var passState = new PassState(context);\n  passState.blendingEnabled = false;\n  passState.scissorTest = {\n    enabled: true,\n    rectangle: new BoundingRectangle()\n  };\n  passState.viewport = new BoundingRectangle();\n  pickDepth._passState = passState;\n}\n\nPickDepthFramebuffer.prototype.update = function (context, drawingBufferPosition, viewport) {\n  var width = viewport.width;\n  var height = viewport.height;\n\n  if (!defined(this._framebuffer) || width !== this._depthStencilTexture.width || height !== this._depthStencilTexture.height) {\n    destroyResources(this);\n    createResources(this, context);\n  }\n\n  var framebuffer = this._framebuffer;\n  var passState = this._passState;\n  passState.framebuffer = framebuffer;\n  passState.viewport.width = width;\n  passState.viewport.height = height;\n  passState.scissorTest.rectangle.x = drawingBufferPosition.x;\n  passState.scissorTest.rectangle.y = height - drawingBufferPosition.y;\n  passState.scissorTest.rectangle.width = 1;\n  passState.scissorTest.rectangle.height = 1;\n  return passState;\n};\n\nPickDepthFramebuffer.prototype.isDestroyed = function () {\n  return false;\n};\n\nPickDepthFramebuffer.prototype.destroy = function () {\n  destroyResources(this);\n  return destroyObject(this);\n};\n\nexport default PickDepthFramebuffer;","map":{"version":3,"sources":["C:/Users/passa/Desktop/WaterDeployTrial/node_modules/cesium/Source/Scene/PickDepthFramebuffer.js"],"names":["BoundingRectangle","defined","destroyObject","PixelFormat","Framebuffer","PassState","PixelDatatype","Texture","PickDepthFramebuffer","_depthStencilTexture","undefined","_framebuffer","_passState","destroyResources","pickDepth","destroy","createResources","context","width","drawingBufferWidth","height","drawingBufferHeight","pixelFormat","DEPTH_STENCIL","pixelDatatype","UNSIGNED_INT_24_8","depthStencilTexture","destroyAttachments","passState","blendingEnabled","scissorTest","enabled","rectangle","viewport","prototype","update","drawingBufferPosition","framebuffer","x","y","isDestroyed"],"mappings":"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","sourcesContent":["import BoundingRectangle from \"../Core/BoundingRectangle.js\";\nimport defined from \"../Core/defined.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport PixelFormat from \"../Core/PixelFormat.js\";\nimport Framebuffer from \"../Renderer/Framebuffer.js\";\nimport PassState from \"../Renderer/PassState.js\";\nimport PixelDatatype from \"../Renderer/PixelDatatype.js\";\nimport Texture from \"../Renderer/Texture.js\";\n\n/**\n * @private\n */\nfunction PickDepthFramebuffer() {\n  this._depthStencilTexture = undefined;\n  this._framebuffer = undefined;\n  this._passState = undefined;\n}\n\nfunction destroyResources(pickDepth) {\n  pickDepth._framebuffer =\n    pickDepth._framebuffer && pickDepth._framebuffer.destroy();\n  pickDepth._depthStencilTexture =\n    pickDepth._depthStencilTexture && pickDepth._depthStencilTexture.destroy();\n}\n\nfunction createResources(pickDepth, context) {\n  var width = context.drawingBufferWidth;\n  var height = context.drawingBufferHeight;\n\n  pickDepth._depthStencilTexture = new Texture({\n    context: context,\n    width: width,\n    height: height,\n    pixelFormat: PixelFormat.DEPTH_STENCIL,\n    pixelDatatype: PixelDatatype.UNSIGNED_INT_24_8,\n  });\n\n  pickDepth._framebuffer = new Framebuffer({\n    context: context,\n    depthStencilTexture: pickDepth._depthStencilTexture,\n    destroyAttachments: false,\n  });\n\n  var passState = new PassState(context);\n  passState.blendingEnabled = false;\n  passState.scissorTest = {\n    enabled: true,\n    rectangle: new BoundingRectangle(),\n  };\n  passState.viewport = new BoundingRectangle();\n  pickDepth._passState = passState;\n}\n\nPickDepthFramebuffer.prototype.update = function (\n  context,\n  drawingBufferPosition,\n  viewport\n) {\n  var width = viewport.width;\n  var height = viewport.height;\n\n  if (\n    !defined(this._framebuffer) ||\n    width !== this._depthStencilTexture.width ||\n    height !== this._depthStencilTexture.height\n  ) {\n    destroyResources(this);\n    createResources(this, context);\n  }\n\n  var framebuffer = this._framebuffer;\n  var passState = this._passState;\n  passState.framebuffer = framebuffer;\n  passState.viewport.width = width;\n  passState.viewport.height = height;\n  passState.scissorTest.rectangle.x = drawingBufferPosition.x;\n  passState.scissorTest.rectangle.y = height - drawingBufferPosition.y;\n  passState.scissorTest.rectangle.width = 1;\n  passState.scissorTest.rectangle.height = 1;\n\n  return passState;\n};\n\nPickDepthFramebuffer.prototype.isDestroyed = function () {\n  return false;\n};\n\nPickDepthFramebuffer.prototype.destroy = function () {\n  destroyResources(this);\n  return destroyObject(this);\n};\nexport default PickDepthFramebuffer;\n"]},"metadata":{},"sourceType":"module"}