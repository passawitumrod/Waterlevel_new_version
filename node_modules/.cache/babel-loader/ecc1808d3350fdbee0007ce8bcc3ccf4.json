{"ast":null,"code":"import Cartesian3 from \"../Core/Cartesian3.js\";\nimport Color from \"../Core/Color.js\";\nimport ColorGeometryInstanceAttribute from \"../Core/ColorGeometryInstanceAttribute.js\";\nimport defaultValue from \"../Core/defaultValue.js\";\nimport defined from \"../Core/defined.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport DeveloperError from \"../Core/DeveloperError.js\";\nimport FrustumGeometry from \"../Core/FrustumGeometry.js\";\nimport FrustumOutlineGeometry from \"../Core/FrustumOutlineGeometry.js\";\nimport GeometryInstance from \"../Core/GeometryInstance.js\";\nimport Matrix3 from \"../Core/Matrix3.js\";\nimport OrthographicFrustum from \"../Core/OrthographicFrustum.js\";\nimport OrthographicOffCenterFrustum from \"../Core/OrthographicOffCenterFrustum.js\";\nimport PerspectiveFrustum from \"../Core/PerspectiveFrustum.js\";\nimport PerspectiveOffCenterFrustum from \"../Core/PerspectiveOffCenterFrustum.js\";\nimport Quaternion from \"../Core/Quaternion.js\";\nimport PerInstanceColorAppearance from \"./PerInstanceColorAppearance.js\";\nimport Primitive from \"./Primitive.js\";\n/**\n * Draws the outline of the camera's view frustum.\n *\n * @alias DebugCameraPrimitive\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Camera} options.camera The camera.\n * @param {Color} [options.color=Color.CYAN] The color of the debug outline.\n * @param {Boolean} [options.updateOnChange=true] Whether the primitive updates when the underlying camera changes.\n * @param {Boolean} [options.show=true] Determines if this primitive will be shown.\n * @param {Object} [options.id] A user-defined object to return when the instance is picked with {@link Scene#pick}.\n *\n * @example\n * primitives.add(new Cesium.DebugCameraPrimitive({\n *   camera : camera,\n *   color : Cesium.Color.YELLOW\n * }));\n */\n\nfunction DebugCameraPrimitive(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT); //>>includeStart('debug', pragmas.debug);\n\n  if (!defined(options.camera)) {\n    throw new DeveloperError(\"options.camera is required.\");\n  } //>>includeEnd('debug');\n\n\n  this._camera = options.camera;\n  this._color = defaultValue(options.color, Color.CYAN);\n  this._updateOnChange = defaultValue(options.updateOnChange, true);\n  /**\n   * Determines if this primitive will be shown.\n   *\n   * @type Boolean\n   * @default true\n   */\n\n  this.show = defaultValue(options.show, true);\n  /**\n   * User-defined value returned when the primitive is picked.\n   *\n   * @type {*}\n   * @default undefined\n   *\n   * @see Scene#pick\n   */\n\n  this.id = options.id;\n  this._id = undefined;\n  this._outlinePrimitives = [];\n  this._planesPrimitives = [];\n}\n\nvar scratchRight = new Cartesian3();\nvar scratchRotation = new Matrix3();\nvar scratchOrientation = new Quaternion();\nvar scratchPerspective = new PerspectiveFrustum();\nvar scratchPerspectiveOffCenter = new PerspectiveOffCenterFrustum();\nvar scratchOrthographic = new OrthographicFrustum();\nvar scratchOrthographicOffCenter = new OrthographicOffCenterFrustum();\nvar scratchColor = new Color();\nvar scratchSplits = [1.0, 100000.0];\n/**\n * @private\n */\n\nDebugCameraPrimitive.prototype.update = function (frameState) {\n  if (!this.show) {\n    return;\n  }\n\n  var planesPrimitives = this._planesPrimitives;\n  var outlinePrimitives = this._outlinePrimitives;\n  var i;\n  var length;\n\n  if (this._updateOnChange) {\n    // Recreate the primitive every frame\n    length = planesPrimitives.length;\n\n    for (i = 0; i < length; ++i) {\n      outlinePrimitives[i] = outlinePrimitives[i] && outlinePrimitives[i].destroy();\n      planesPrimitives[i] = planesPrimitives[i] && planesPrimitives[i].destroy();\n    }\n\n    planesPrimitives.length = 0;\n    outlinePrimitives.length = 0;\n  }\n\n  if (planesPrimitives.length === 0) {\n    var camera = this._camera;\n    var cameraFrustum = camera.frustum;\n    var frustum;\n\n    if (cameraFrustum instanceof PerspectiveFrustum) {\n      frustum = scratchPerspective;\n    } else if (cameraFrustum instanceof PerspectiveOffCenterFrustum) {\n      frustum = scratchPerspectiveOffCenter;\n    } else if (cameraFrustum instanceof OrthographicFrustum) {\n      frustum = scratchOrthographic;\n    } else {\n      frustum = scratchOrthographicOffCenter;\n    }\n\n    frustum = cameraFrustum.clone(frustum);\n    var frustumSplits = frameState.frustumSplits;\n    var numFrustums = frustumSplits.length - 1;\n\n    if (numFrustums <= 0) {\n      frustumSplits = scratchSplits; // Use near and far planes if no splits created\n\n      frustumSplits[0] = this._camera.frustum.near;\n      frustumSplits[1] = this._camera.frustum.far;\n      numFrustums = 1;\n    }\n\n    var position = camera.positionWC;\n    var direction = camera.directionWC;\n    var up = camera.upWC;\n    var right = camera.rightWC;\n    right = Cartesian3.negate(right, scratchRight);\n    var rotation = scratchRotation;\n    Matrix3.setColumn(rotation, 0, right, rotation);\n    Matrix3.setColumn(rotation, 1, up, rotation);\n    Matrix3.setColumn(rotation, 2, direction, rotation);\n    var orientation = Quaternion.fromRotationMatrix(rotation, scratchOrientation);\n    planesPrimitives.length = outlinePrimitives.length = numFrustums;\n\n    for (i = 0; i < numFrustums; ++i) {\n      frustum.near = frustumSplits[i];\n      frustum.far = frustumSplits[i + 1];\n      planesPrimitives[i] = new Primitive({\n        geometryInstances: new GeometryInstance({\n          geometry: new FrustumGeometry({\n            origin: position,\n            orientation: orientation,\n            frustum: frustum,\n            _drawNearPlane: i === 0\n          }),\n          attributes: {\n            color: ColorGeometryInstanceAttribute.fromColor(Color.fromAlpha(this._color, 0.1, scratchColor))\n          },\n          id: this.id,\n          pickPrimitive: this\n        }),\n        appearance: new PerInstanceColorAppearance({\n          translucent: true,\n          flat: true\n        }),\n        asynchronous: false\n      });\n      outlinePrimitives[i] = new Primitive({\n        geometryInstances: new GeometryInstance({\n          geometry: new FrustumOutlineGeometry({\n            origin: position,\n            orientation: orientation,\n            frustum: frustum,\n            _drawNearPlane: i === 0\n          }),\n          attributes: {\n            color: ColorGeometryInstanceAttribute.fromColor(this._color)\n          },\n          id: this.id,\n          pickPrimitive: this\n        }),\n        appearance: new PerInstanceColorAppearance({\n          translucent: false,\n          flat: true\n        }),\n        asynchronous: false\n      });\n    }\n  }\n\n  length = planesPrimitives.length;\n\n  for (i = 0; i < length; ++i) {\n    outlinePrimitives[i].update(frameState);\n    planesPrimitives[i].update(frameState);\n  }\n};\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <p>\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n * </p>\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see DebugCameraPrimitive#destroy\n */\n\n\nDebugCameraPrimitive.prototype.isDestroyed = function () {\n  return false;\n};\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <p>\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n * </p>\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n * @example\n * p = p && p.destroy();\n *\n * @see DebugCameraPrimitive#isDestroyed\n */\n\n\nDebugCameraPrimitive.prototype.destroy = function () {\n  var length = this._planesPrimitives.length;\n\n  for (var i = 0; i < length; ++i) {\n    this._outlinePrimitives[i] = this._outlinePrimitives[i] && this._outlinePrimitives[i].destroy();\n    this._planesPrimitives[i] = this._planesPrimitives[i] && this._planesPrimitives[i].destroy();\n  }\n\n  return destroyObject(this);\n};\n\nexport default DebugCameraPrimitive;","map":{"version":3,"sources":["C:/Users/passa/Desktop/WaterLevelReact/node_modules/cesium/Source/Scene/DebugCameraPrimitive.js"],"names":["Cartesian3","Color","ColorGeometryInstanceAttribute","defaultValue","defined","destroyObject","DeveloperError","FrustumGeometry","FrustumOutlineGeometry","GeometryInstance","Matrix3","OrthographicFrustum","OrthographicOffCenterFrustum","PerspectiveFrustum","PerspectiveOffCenterFrustum","Quaternion","PerInstanceColorAppearance","Primitive","DebugCameraPrimitive","options","EMPTY_OBJECT","camera","_camera","_color","color","CYAN","_updateOnChange","updateOnChange","show","id","_id","undefined","_outlinePrimitives","_planesPrimitives","scratchRight","scratchRotation","scratchOrientation","scratchPerspective","scratchPerspectiveOffCenter","scratchOrthographic","scratchOrthographicOffCenter","scratchColor","scratchSplits","prototype","update","frameState","planesPrimitives","outlinePrimitives","i","length","destroy","cameraFrustum","frustum","clone","frustumSplits","numFrustums","near","far","position","positionWC","direction","directionWC","up","upWC","right","rightWC","negate","rotation","setColumn","orientation","fromRotationMatrix","geometryInstances","geometry","origin","_drawNearPlane","attributes","fromColor","fromAlpha","pickPrimitive","appearance","translucent","flat","asynchronous","isDestroyed"],"mappings":"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","sourcesContent":["import Cartesian3 from \"../Core/Cartesian3.js\";\nimport Color from \"../Core/Color.js\";\nimport ColorGeometryInstanceAttribute from \"../Core/ColorGeometryInstanceAttribute.js\";\nimport defaultValue from \"../Core/defaultValue.js\";\nimport defined from \"../Core/defined.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport DeveloperError from \"../Core/DeveloperError.js\";\nimport FrustumGeometry from \"../Core/FrustumGeometry.js\";\nimport FrustumOutlineGeometry from \"../Core/FrustumOutlineGeometry.js\";\nimport GeometryInstance from \"../Core/GeometryInstance.js\";\nimport Matrix3 from \"../Core/Matrix3.js\";\nimport OrthographicFrustum from \"../Core/OrthographicFrustum.js\";\nimport OrthographicOffCenterFrustum from \"../Core/OrthographicOffCenterFrustum.js\";\nimport PerspectiveFrustum from \"../Core/PerspectiveFrustum.js\";\nimport PerspectiveOffCenterFrustum from \"../Core/PerspectiveOffCenterFrustum.js\";\nimport Quaternion from \"../Core/Quaternion.js\";\nimport PerInstanceColorAppearance from \"./PerInstanceColorAppearance.js\";\nimport Primitive from \"./Primitive.js\";\n\n/**\n * Draws the outline of the camera's view frustum.\n *\n * @alias DebugCameraPrimitive\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Camera} options.camera The camera.\n * @param {Color} [options.color=Color.CYAN] The color of the debug outline.\n * @param {Boolean} [options.updateOnChange=true] Whether the primitive updates when the underlying camera changes.\n * @param {Boolean} [options.show=true] Determines if this primitive will be shown.\n * @param {Object} [options.id] A user-defined object to return when the instance is picked with {@link Scene#pick}.\n *\n * @example\n * primitives.add(new Cesium.DebugCameraPrimitive({\n *   camera : camera,\n *   color : Cesium.Color.YELLOW\n * }));\n */\nfunction DebugCameraPrimitive(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(options.camera)) {\n    throw new DeveloperError(\"options.camera is required.\");\n  }\n  //>>includeEnd('debug');\n\n  this._camera = options.camera;\n  this._color = defaultValue(options.color, Color.CYAN);\n  this._updateOnChange = defaultValue(options.updateOnChange, true);\n\n  /**\n   * Determines if this primitive will be shown.\n   *\n   * @type Boolean\n   * @default true\n   */\n  this.show = defaultValue(options.show, true);\n\n  /**\n   * User-defined value returned when the primitive is picked.\n   *\n   * @type {*}\n   * @default undefined\n   *\n   * @see Scene#pick\n   */\n  this.id = options.id;\n  this._id = undefined;\n\n  this._outlinePrimitives = [];\n  this._planesPrimitives = [];\n}\n\nvar scratchRight = new Cartesian3();\nvar scratchRotation = new Matrix3();\nvar scratchOrientation = new Quaternion();\nvar scratchPerspective = new PerspectiveFrustum();\nvar scratchPerspectiveOffCenter = new PerspectiveOffCenterFrustum();\nvar scratchOrthographic = new OrthographicFrustum();\nvar scratchOrthographicOffCenter = new OrthographicOffCenterFrustum();\n\nvar scratchColor = new Color();\nvar scratchSplits = [1.0, 100000.0];\n\n/**\n * @private\n */\nDebugCameraPrimitive.prototype.update = function (frameState) {\n  if (!this.show) {\n    return;\n  }\n\n  var planesPrimitives = this._planesPrimitives;\n  var outlinePrimitives = this._outlinePrimitives;\n  var i;\n  var length;\n\n  if (this._updateOnChange) {\n    // Recreate the primitive every frame\n    length = planesPrimitives.length;\n    for (i = 0; i < length; ++i) {\n      outlinePrimitives[i] =\n        outlinePrimitives[i] && outlinePrimitives[i].destroy();\n      planesPrimitives[i] =\n        planesPrimitives[i] && planesPrimitives[i].destroy();\n    }\n    planesPrimitives.length = 0;\n    outlinePrimitives.length = 0;\n  }\n\n  if (planesPrimitives.length === 0) {\n    var camera = this._camera;\n    var cameraFrustum = camera.frustum;\n    var frustum;\n    if (cameraFrustum instanceof PerspectiveFrustum) {\n      frustum = scratchPerspective;\n    } else if (cameraFrustum instanceof PerspectiveOffCenterFrustum) {\n      frustum = scratchPerspectiveOffCenter;\n    } else if (cameraFrustum instanceof OrthographicFrustum) {\n      frustum = scratchOrthographic;\n    } else {\n      frustum = scratchOrthographicOffCenter;\n    }\n    frustum = cameraFrustum.clone(frustum);\n\n    var frustumSplits = frameState.frustumSplits;\n    var numFrustums = frustumSplits.length - 1;\n    if (numFrustums <= 0) {\n      frustumSplits = scratchSplits; // Use near and far planes if no splits created\n      frustumSplits[0] = this._camera.frustum.near;\n      frustumSplits[1] = this._camera.frustum.far;\n      numFrustums = 1;\n    }\n\n    var position = camera.positionWC;\n    var direction = camera.directionWC;\n    var up = camera.upWC;\n    var right = camera.rightWC;\n    right = Cartesian3.negate(right, scratchRight);\n\n    var rotation = scratchRotation;\n    Matrix3.setColumn(rotation, 0, right, rotation);\n    Matrix3.setColumn(rotation, 1, up, rotation);\n    Matrix3.setColumn(rotation, 2, direction, rotation);\n\n    var orientation = Quaternion.fromRotationMatrix(\n      rotation,\n      scratchOrientation\n    );\n\n    planesPrimitives.length = outlinePrimitives.length = numFrustums;\n\n    for (i = 0; i < numFrustums; ++i) {\n      frustum.near = frustumSplits[i];\n      frustum.far = frustumSplits[i + 1];\n\n      planesPrimitives[i] = new Primitive({\n        geometryInstances: new GeometryInstance({\n          geometry: new FrustumGeometry({\n            origin: position,\n            orientation: orientation,\n            frustum: frustum,\n            _drawNearPlane: i === 0,\n          }),\n          attributes: {\n            color: ColorGeometryInstanceAttribute.fromColor(\n              Color.fromAlpha(this._color, 0.1, scratchColor)\n            ),\n          },\n          id: this.id,\n          pickPrimitive: this,\n        }),\n        appearance: new PerInstanceColorAppearance({\n          translucent: true,\n          flat: true,\n        }),\n        asynchronous: false,\n      });\n\n      outlinePrimitives[i] = new Primitive({\n        geometryInstances: new GeometryInstance({\n          geometry: new FrustumOutlineGeometry({\n            origin: position,\n            orientation: orientation,\n            frustum: frustum,\n            _drawNearPlane: i === 0,\n          }),\n          attributes: {\n            color: ColorGeometryInstanceAttribute.fromColor(this._color),\n          },\n          id: this.id,\n          pickPrimitive: this,\n        }),\n        appearance: new PerInstanceColorAppearance({\n          translucent: false,\n          flat: true,\n        }),\n        asynchronous: false,\n      });\n    }\n  }\n\n  length = planesPrimitives.length;\n  for (i = 0; i < length; ++i) {\n    outlinePrimitives[i].update(frameState);\n    planesPrimitives[i].update(frameState);\n  }\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <p>\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n * </p>\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see DebugCameraPrimitive#destroy\n */\nDebugCameraPrimitive.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <p>\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n * </p>\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n * @example\n * p = p && p.destroy();\n *\n * @see DebugCameraPrimitive#isDestroyed\n */\nDebugCameraPrimitive.prototype.destroy = function () {\n  var length = this._planesPrimitives.length;\n  for (var i = 0; i < length; ++i) {\n    this._outlinePrimitives[i] =\n      this._outlinePrimitives[i] && this._outlinePrimitives[i].destroy();\n    this._planesPrimitives[i] =\n      this._planesPrimitives[i] && this._planesPrimitives[i].destroy();\n  }\n  return destroyObject(this);\n};\nexport default DebugCameraPrimitive;\n"]},"metadata":{},"sourceType":"module"}