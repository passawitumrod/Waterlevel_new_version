{"ast":null,"code":"import Cartesian2 from \"../Core/Cartesian2.js\";\nimport Cartesian3 from \"../Core/Cartesian3.js\";\nimport Cartographic from \"../Core/Cartographic.js\";\nimport combine from \"../Core/combine.js\";\nimport Credit from \"../Core/Credit.js\";\nimport defaultValue from \"../Core/defaultValue.js\";\nimport defined from \"../Core/defined.js\";\nimport DeveloperError from \"../Core/DeveloperError.js\";\nimport Event from \"../Core/Event.js\";\nimport GeographicProjection from \"../Core/GeographicProjection.js\";\nimport CesiumMath from \"../Core/Math.js\";\nimport Rectangle from \"../Core/Rectangle.js\";\nimport Resource from \"../Core/Resource.js\";\nimport WebMercatorTilingScheme from \"../Core/WebMercatorTilingScheme.js\";\nimport when from \"../ThirdParty/when.js\";\nimport ImageryProvider from \"./ImageryProvider.js\";\nvar templateRegex = /{[^}]+}/g;\nvar tags = {\n  x: xTag,\n  y: yTag,\n  z: zTag,\n  s: sTag,\n  reverseX: reverseXTag,\n  reverseY: reverseYTag,\n  reverseZ: reverseZTag,\n  westDegrees: westDegreesTag,\n  southDegrees: southDegreesTag,\n  eastDegrees: eastDegreesTag,\n  northDegrees: northDegreesTag,\n  westProjected: westProjectedTag,\n  southProjected: southProjectedTag,\n  eastProjected: eastProjectedTag,\n  northProjected: northProjectedTag,\n  width: widthTag,\n  height: heightTag\n};\nvar pickFeaturesTags = combine(tags, {\n  i: iTag,\n  j: jTag,\n  reverseI: reverseITag,\n  reverseJ: reverseJTag,\n  longitudeDegrees: longitudeDegreesTag,\n  latitudeDegrees: latitudeDegreesTag,\n  longitudeProjected: longitudeProjectedTag,\n  latitudeProjected: latitudeProjectedTag,\n  format: formatTag\n});\n/**\n * Provides imagery by requesting tiles using a specified URL template.\n *\n * @alias UrlTemplateImageryProvider\n * @constructor\n *\n * @param {Promise.<Object>|Object} [options] Object with the following properties:\n * @param {Resource|String} options.url  The URL template to use to request tiles.  It has the following keywords:\n * <ul>\n *     <li><code>{z}</code>: The level of the tile in the tiling scheme.  Level zero is the root of the quadtree pyramid.</li>\n *     <li><code>{x}</code>: The tile X coordinate in the tiling scheme, where 0 is the Westernmost tile.</li>\n *     <li><code>{y}</code>: The tile Y coordinate in the tiling scheme, where 0 is the Northernmost tile.</li>\n *     <li><code>{s}</code>: One of the available subdomains, used to overcome browser limits on the number of simultaneous requests per host.</li>\n *     <li><code>{reverseX}</code>: The tile X coordinate in the tiling scheme, where 0 is the Easternmost tile.</li>\n *     <li><code>{reverseY}</code>: The tile Y coordinate in the tiling scheme, where 0 is the Southernmost tile.</li>\n *     <li><code>{reverseZ}</code>: The level of the tile in the tiling scheme, where level zero is the maximum level of the quadtree pyramid.  In order to use reverseZ, maximumLevel must be defined.</li>\n *     <li><code>{westDegrees}</code>: The Western edge of the tile in geodetic degrees.</li>\n *     <li><code>{southDegrees}</code>: The Southern edge of the tile in geodetic degrees.</li>\n *     <li><code>{eastDegrees}</code>: The Eastern edge of the tile in geodetic degrees.</li>\n *     <li><code>{northDegrees}</code>: The Northern edge of the tile in geodetic degrees.</li>\n *     <li><code>{westProjected}</code>: The Western edge of the tile in projected coordinates of the tiling scheme.</li>\n *     <li><code>{southProjected}</code>: The Southern edge of the tile in projected coordinates of the tiling scheme.</li>\n *     <li><code>{eastProjected}</code>: The Eastern edge of the tile in projected coordinates of the tiling scheme.</li>\n *     <li><code>{northProjected}</code>: The Northern edge of the tile in projected coordinates of the tiling scheme.</li>\n *     <li><code>{width}</code>: The width of each tile in pixels.</li>\n *     <li><code>{height}</code>: The height of each tile in pixels.</li>\n * </ul>\n * @param {Resource|String} [options.pickFeaturesUrl] The URL template to use to pick features.  If this property is not specified,\n *                 {@link UrlTemplateImageryProvider#pickFeatures} will immediately returned undefined, indicating no\n *                 features picked.  The URL template supports all of the keywords supported by the <code>url</code>\n *                 parameter, plus the following:\n * <ul>\n *     <li><code>{i}</code>: The pixel column (horizontal coordinate) of the picked position, where the Westernmost pixel is 0.</li>\n *     <li><code>{j}</code>: The pixel row (vertical coordinate) of the picked position, where the Northernmost pixel is 0.</li>\n *     <li><code>{reverseI}</code>: The pixel column (horizontal coordinate) of the picked position, where the Easternmost pixel is 0.</li>\n *     <li><code>{reverseJ}</code>: The pixel row (vertical coordinate) of the picked position, where the Southernmost pixel is 0.</li>\n *     <li><code>{longitudeDegrees}</code>: The longitude of the picked position in degrees.</li>\n *     <li><code>{latitudeDegrees}</code>: The latitude of the picked position in degrees.</li>\n *     <li><code>{longitudeProjected}</code>: The longitude of the picked position in the projected coordinates of the tiling scheme.</li>\n *     <li><code>{latitudeProjected}</code>: The latitude of the picked position in the projected coordinates of the tiling scheme.</li>\n *     <li><code>{format}</code>: The format in which to get feature information, as specified in the {@link GetFeatureInfoFormat}.</li>\n * </ul>\n * @param {Object} [options.urlSchemeZeroPadding] Gets the URL scheme zero padding for each tile coordinate. The format is '000' where\n * each coordinate will be padded on the left with zeros to match the width of the passed string of zeros. e.g. Setting:\n * urlSchemeZeroPadding : { '{x}' : '0000'}\n * will cause an 'x' value of 12 to return the string '0012' for {x} in the generated URL.\n * It the passed object has the following keywords:\n * <ul>\n *  <li> <code>{z}</code>: The zero padding for the level of the tile in the tiling scheme.</li>\n *  <li> <code>{x}</code>: The zero padding for the tile X coordinate in the tiling scheme.</li>\n *  <li> <code>{y}</code>: The zero padding for the the tile Y coordinate in the tiling scheme.</li>\n *  <li> <code>{reverseX}</code>: The zero padding for the tile reverseX coordinate in the tiling scheme.</li>\n *  <li> <code>{reverseY}</code>: The zero padding for the tile reverseY coordinate in the tiling scheme.</li>\n *  <li> <code>{reverseZ}</code>: The zero padding for the reverseZ coordinate of the tile in the tiling scheme.</li>\n * </ul>\n * @param {String|String[]} [options.subdomains='abc'] The subdomains to use for the <code>{s}</code> placeholder in the URL template.\n *                          If this parameter is a single string, each character in the string is a subdomain.  If it is\n *                          an array, each element in the array is a subdomain.\n * @param {Credit|String} [options.credit=''] A credit for the data source, which is displayed on the canvas.\n * @param {Number} [options.minimumLevel=0] The minimum level-of-detail supported by the imagery provider.  Take care when specifying\n *                 this that the number of tiles at the minimum level is small, such as four or less.  A larger number is likely\n *                 to result in rendering problems.\n * @param {Number} [options.maximumLevel] The maximum level-of-detail supported by the imagery provider, or undefined if there is no limit.\n * @param {Rectangle} [options.rectangle=Rectangle.MAX_VALUE] The rectangle, in radians, covered by the image.\n * @param {TilingScheme} [options.tilingScheme=WebMercatorTilingScheme] The tiling scheme specifying how the ellipsoidal\n * surface is broken into tiles.  If this parameter is not provided, a {@link WebMercatorTilingScheme}\n * is used.\n * @param {Ellipsoid} [options.ellipsoid] The ellipsoid.  If the tilingScheme is specified,\n *                    this parameter is ignored and the tiling scheme's ellipsoid is used instead. If neither\n *                    parameter is specified, the WGS84 ellipsoid is used.\n * @param {Number} [options.tileWidth=256] Pixel width of image tiles.\n * @param {Number} [options.tileHeight=256] Pixel height of image tiles.\n * @param {Boolean} [options.hasAlphaChannel=true] true if the images provided by this imagery provider\n *                  include an alpha channel; otherwise, false.  If this property is false, an alpha channel, if\n *                  present, will be ignored.  If this property is true, any images without an alpha channel will\n *                  be treated as if their alpha is 1.0 everywhere.  When this property is false, memory usage\n *                  and texture upload time are potentially reduced.\n * @param {GetFeatureInfoFormat[]} [options.getFeatureInfoFormats] The formats in which to get feature information at a\n *                                 specific location when {@link UrlTemplateImageryProvider#pickFeatures} is invoked.  If this\n *                                 parameter is not specified, feature picking is disabled.\n * @param {Boolean} [options.enablePickFeatures=true] If true, {@link UrlTemplateImageryProvider#pickFeatures} will\n *        request the <code>options.pickFeaturesUrl</code> and attempt to interpret the features included in the response.  If false,\n *        {@link UrlTemplateImageryProvider#pickFeatures} will immediately return undefined (indicating no pickable\n *        features) without communicating with the server.  Set this property to false if you know your data\n *        source does not support picking features or if you don't want this provider's features to be pickable. Note\n *        that this can be dynamically overridden by modifying the {@link UriTemplateImageryProvider#enablePickFeatures}\n *        property.\n * @param {Object} [options.customTags] Allow to replace custom keywords in the URL template. The object must have strings as keys and functions as values.\n *\n *\n * @example\n * // Access Natural Earth II imagery, which uses a TMS tiling scheme and Geographic (EPSG:4326) project\n * var tms = new Cesium.UrlTemplateImageryProvider({\n *     url : Cesium.buildModuleUrl('Assets/Textures/NaturalEarthII') + '/{z}/{x}/{reverseY}.jpg',\n *     credit : 'Â© Analytical Graphics, Inc.',\n *     tilingScheme : new Cesium.GeographicTilingScheme(),\n *     maximumLevel : 5\n * });\n * // Access the CartoDB Positron basemap, which uses an OpenStreetMap-like tiling scheme.\n * var positron = new Cesium.UrlTemplateImageryProvider({\n *     url : 'http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png',\n *     credit : 'Map tiles by CartoDB, under CC BY 3.0. Data by OpenStreetMap, under ODbL.'\n * });\n * // Access a Web Map Service (WMS) server.\n * var wms = new Cesium.UrlTemplateImageryProvider({\n *    url : 'https://programs.communications.gov.au/geoserver/ows?tiled=true&' +\n *          'transparent=true&format=image%2Fpng&exceptions=application%2Fvnd.ogc.se_xml&' +\n *          'styles=&service=WMS&version=1.1.1&request=GetMap&' +\n *          'layers=public%3AMyBroadband_Availability&srs=EPSG%3A3857&' +\n *          'bbox={westProjected}%2C{southProjected}%2C{eastProjected}%2C{northProjected}&' +\n *          'width=256&height=256',\n *    rectangle : Cesium.Rectangle.fromDegrees(96.799393, -43.598214999057824, 153.63925700000001, -9.2159219997013)\n * });\n * // Using custom tags in your template url.\n * var custom = new Cesium.UrlTemplateImageryProvider({\n *    url : 'https://yoururl/{Time}/{z}/{y}/{x}.png',\n *    customTags : {\n *        Time: function(imageryProvider, x, y, level) {\n *            return '20171231'\n *        }\n *    }\n * });\n *\n * @see ArcGisMapServerImageryProvider\n * @see BingMapsImageryProvider\n * @see GoogleEarthEnterpriseMapsProvider\n * @see OpenStreetMapImageryProvider\n * @see SingleTileImageryProvider\n * @see TileMapServiceImageryProvider\n * @see WebMapServiceImageryProvider\n * @see WebMapTileServiceImageryProvider\n */\n\nfunction UrlTemplateImageryProvider(options) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(options)) {\n    throw new DeveloperError(\"options is required.\");\n  }\n\n  if (!when.isPromise(options) && !defined(options.url)) {\n    throw new DeveloperError(\"options is required.\");\n  } //>>includeEnd('debug');\n\n\n  this._errorEvent = new Event();\n  this._resource = undefined;\n  this._urlSchemeZeroPadding = undefined;\n  this._pickFeaturesResource = undefined;\n  this._tileWidth = undefined;\n  this._tileHeight = undefined;\n  this._maximumLevel = undefined;\n  this._minimumLevel = undefined;\n  this._tilingScheme = undefined;\n  this._rectangle = undefined;\n  this._tileDiscardPolicy = undefined;\n  this._credit = undefined;\n  this._hasAlphaChannel = undefined;\n  this._readyPromise = undefined;\n  this._tags = undefined;\n  this._pickFeaturesTags = undefined;\n  /**\n   * Gets or sets a value indicating whether feature picking is enabled.  If true, {@link UrlTemplateImageryProvider#pickFeatures} will\n   * request the <code>options.pickFeaturesUrl</code> and attempt to interpret the features included in the response.  If false,\n   * {@link UrlTemplateImageryProvider#pickFeatures} will immediately return undefined (indicating no pickable\n   * features) without communicating with the server.  Set this property to false if you know your data\n   * source does not support picking features or if you don't want this provider's features to be pickable.\n   * @type {Boolean}\n   * @default true\n   */\n\n  this.enablePickFeatures = true;\n  this.reinitialize(options);\n}\n\nObject.defineProperties(UrlTemplateImageryProvider.prototype, {\n  /**\n   * Gets the URL template to use to request tiles.  It has the following keywords:\n   * <ul>\n   *  <li> <code>{z}</code>: The level of the tile in the tiling scheme.  Level zero is the root of the quadtree pyramid.</li>\n   *  <li> <code>{x}</code>: The tile X coordinate in the tiling scheme, where 0 is the Westernmost tile.</li>\n   *  <li> <code>{y}</code>: The tile Y coordinate in the tiling scheme, where 0 is the Northernmost tile.</li>\n   *  <li> <code>{s}</code>: One of the available subdomains, used to overcome browser limits on the number of simultaneous requests per host.</li>\n   *  <li> <code>{reverseX}</code>: The tile X coordinate in the tiling scheme, where 0 is the Easternmost tile.</li>\n   *  <li> <code>{reverseY}</code>: The tile Y coordinate in the tiling scheme, where 0 is the Southernmost tile.</li>\n   *  <li> <code>{reverseZ}</code>: The level of the tile in the tiling scheme, where level zero is the maximum level of the quadtree pyramid.  In order to use reverseZ, maximumLevel must be defined.</li>\n   *  <li> <code>{westDegrees}</code>: The Western edge of the tile in geodetic degrees.</li>\n   *  <li> <code>{southDegrees}</code>: The Southern edge of the tile in geodetic degrees.</li>\n   *  <li> <code>{eastDegrees}</code>: The Eastern edge of the tile in geodetic degrees.</li>\n   *  <li> <code>{northDegrees}</code>: The Northern edge of the tile in geodetic degrees.</li>\n   *  <li> <code>{westProjected}</code>: The Western edge of the tile in projected coordinates of the tiling scheme.</li>\n   *  <li> <code>{southProjected}</code>: The Southern edge of the tile in projected coordinates of the tiling scheme.</li>\n   *  <li> <code>{eastProjected}</code>: The Eastern edge of the tile in projected coordinates of the tiling scheme.</li>\n   *  <li> <code>{northProjected}</code>: The Northern edge of the tile in projected coordinates of the tiling scheme.</li>\n   *  <li> <code>{width}</code>: The width of each tile in pixels.</li>\n   *  <li> <code>{height}</code>: The height of each tile in pixels.</li>\n   * </ul>\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  url: {\n    get: function get() {\n      return this._resource.url;\n    }\n  },\n\n  /**\n   * Gets the URL scheme zero padding for each tile coordinate. The format is '000' where each coordinate will be padded on\n   * the left with zeros to match the width of the passed string of zeros. e.g. Setting:\n   * urlSchemeZeroPadding : { '{x}' : '0000'}\n   * will cause an 'x' value of 12 to return the string '0012' for {x} in the generated URL.\n   * It has the following keywords:\n   * <ul>\n   *  <li> <code>{z}</code>: The zero padding for the level of the tile in the tiling scheme.</li>\n   *  <li> <code>{x}</code>: The zero padding for the tile X coordinate in the tiling scheme.</li>\n   *  <li> <code>{y}</code>: The zero padding for the the tile Y coordinate in the tiling scheme.</li>\n   *  <li> <code>{reverseX}</code>: The zero padding for the tile reverseX coordinate in the tiling scheme.</li>\n   *  <li> <code>{reverseY}</code>: The zero padding for the tile reverseY coordinate in the tiling scheme.</li>\n   *  <li> <code>{reverseZ}</code>: The zero padding for the reverseZ coordinate of the tile in the tiling scheme.</li>\n   * </ul>\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Object}\n   * @readonly\n   */\n  urlSchemeZeroPadding: {\n    get: function get() {\n      return this._urlSchemeZeroPadding;\n    }\n  },\n\n  /**\n   * Gets the URL template to use to use to pick features.  If this property is not specified,\n   * {@link UrlTemplateImageryProvider#pickFeatures} will immediately returned undefined, indicating no\n   * features picked.  The URL template supports all of the keywords supported by the\n   * {@link UrlTemplateImageryProvider#url} property, plus the following:\n   * <ul>\n   *     <li><code>{i}</code>: The pixel column (horizontal coordinate) of the picked position, where the Westernmost pixel is 0.</li>\n   *     <li><code>{j}</code>: The pixel row (vertical coordinate) of the picked position, where the Northernmost pixel is 0.</li>\n   *     <li><code>{reverseI}</code>: The pixel column (horizontal coordinate) of the picked position, where the Easternmost pixel is 0.</li>\n   *     <li><code>{reverseJ}</code>: The pixel row (vertical coordinate) of the picked position, where the Southernmost pixel is 0.</li>\n   *     <li><code>{longitudeDegrees}</code>: The longitude of the picked position in degrees.</li>\n   *     <li><code>{latitudeDegrees}</code>: The latitude of the picked position in degrees.</li>\n   *     <li><code>{longitudeProjected}</code>: The longitude of the picked position in the projected coordinates of the tiling scheme.</li>\n   *     <li><code>{latitudeProjected}</code>: The latitude of the picked position in the projected coordinates of the tiling scheme.</li>\n   *     <li><code>{format}</code>: The format in which to get feature information, as specified in the {@link GetFeatureInfoFormat}.</li>\n   * </ul>\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  pickFeaturesUrl: {\n    get: function get() {\n      return this._pickFeaturesResource.url;\n    }\n  },\n\n  /**\n   * Gets the proxy used by this provider.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Proxy}\n   * @readonly\n   * @default undefined\n   */\n  proxy: {\n    get: function get() {\n      return this._resource.proxy;\n    }\n  },\n\n  /**\n   * Gets the width of each tile, in pixels. This function should\n   * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   * @default 256\n   */\n  tileWidth: {\n    get: function get() {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\"tileWidth must not be called before the imagery provider is ready.\");\n      } //>>includeEnd('debug');\n\n\n      return this._tileWidth;\n    }\n  },\n\n  /**\n   * Gets the height of each tile, in pixels.  This function should\n   * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   * @default 256\n   */\n  tileHeight: {\n    get: function get() {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\"tileHeight must not be called before the imagery provider is ready.\");\n      } //>>includeEnd('debug');\n\n\n      return this._tileHeight;\n    }\n  },\n\n  /**\n   * Gets the maximum level-of-detail that can be requested, or undefined if there is no limit.\n   * This function should not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   * @default undefined\n   */\n  maximumLevel: {\n    get: function get() {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\"maximumLevel must not be called before the imagery provider is ready.\");\n      } //>>includeEnd('debug');\n\n\n      return this._maximumLevel;\n    }\n  },\n\n  /**\n   * Gets the minimum level-of-detail that can be requested.  This function should\n   * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   * @default 0\n   */\n  minimumLevel: {\n    get: function get() {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\"minimumLevel must not be called before the imagery provider is ready.\");\n      } //>>includeEnd('debug');\n\n\n      return this._minimumLevel;\n    }\n  },\n\n  /**\n   * Gets the tiling scheme used by this provider.  This function should\n   * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {TilingScheme}\n   * @readonly\n   * @default new WebMercatorTilingScheme()\n   */\n  tilingScheme: {\n    get: function get() {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\"tilingScheme must not be called before the imagery provider is ready.\");\n      } //>>includeEnd('debug');\n\n\n      return this._tilingScheme;\n    }\n  },\n\n  /**\n   * Gets the rectangle, in radians, of the imagery provided by this instance.  This function should\n   * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Rectangle}\n   * @readonly\n   * @default tilingScheme.rectangle\n   */\n  rectangle: {\n    get: function get() {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\"rectangle must not be called before the imagery provider is ready.\");\n      } //>>includeEnd('debug');\n\n\n      return this._rectangle;\n    }\n  },\n\n  /**\n   * Gets the tile discard policy.  If not undefined, the discard policy is responsible\n   * for filtering out \"missing\" tiles via its shouldDiscardImage function.  If this function\n   * returns undefined, no tiles are filtered.  This function should\n   * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {TileDiscardPolicy}\n   * @readonly\n   * @default undefined\n   */\n  tileDiscardPolicy: {\n    get: function get() {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\"tileDiscardPolicy must not be called before the imagery provider is ready.\");\n      } //>>includeEnd('debug');\n\n\n      return this._tileDiscardPolicy;\n    }\n  },\n\n  /**\n   * Gets an event that is raised when the imagery provider encounters an asynchronous error.  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Event}\n   * @readonly\n   */\n  errorEvent: {\n    get: function get() {\n      return this._errorEvent;\n    }\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function get() {\n      return defined(this._resource);\n    }\n  },\n\n  /**\n   * Gets a promise that resolves to true when the provider is ready for use.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function get() {\n      return this._readyPromise;\n    }\n  },\n\n  /**\n   * Gets the credit to display when this imagery provider is active.  Typically this is used to credit\n   * the source of the imagery.  This function should not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Credit}\n   * @readonly\n   * @default undefined\n   */\n  credit: {\n    get: function get() {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\"credit must not be called before the imagery provider is ready.\");\n      } //>>includeEnd('debug');\n\n\n      return this._credit;\n    }\n  },\n\n  /**\n   * Gets a value indicating whether or not the images provided by this imagery provider\n   * include an alpha channel.  If this property is false, an alpha channel, if present, will\n   * be ignored.  If this property is true, any images without an alpha channel will be treated\n   * as if their alpha is 1.0 everywhere.  When this property is false, memory usage\n   * and texture upload time are reduced.  This function should\n   * not be called before {@link ImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   * @default true\n   */\n  hasAlphaChannel: {\n    get: function get() {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\"hasAlphaChannel must not be called before the imagery provider is ready.\");\n      } //>>includeEnd('debug');\n\n\n      return this._hasAlphaChannel;\n    }\n  }\n});\n/**\n * Reinitializes this instance.  Reinitializing an instance already in use is supported, but it is not\n * recommended because existing tiles provided by the imagery provider will not be updated.\n *\n * @param {Promise.<Object>|Object} options Any of the options that may be passed to the {@link UrlTemplateImageryProvider} constructor.\n */\n\nUrlTemplateImageryProvider.prototype.reinitialize = function (options) {\n  var that = this;\n  that._readyPromise = when(options).then(function (properties) {\n    //>>includeStart('debug', pragmas.debug);\n    if (!defined(properties)) {\n      throw new DeveloperError(\"options is required.\");\n    }\n\n    if (!defined(properties.url)) {\n      throw new DeveloperError(\"options.url is required.\");\n    } //>>includeEnd('debug');\n\n\n    var customTags = properties.customTags;\n    var allTags = combine(tags, customTags);\n    var allPickFeaturesTags = combine(pickFeaturesTags, customTags);\n    var resource = Resource.createIfNeeded(properties.url);\n    var pickFeaturesResource = Resource.createIfNeeded(properties.pickFeaturesUrl);\n    that.enablePickFeatures = defaultValue(properties.enablePickFeatures, that.enablePickFeatures);\n    that._urlSchemeZeroPadding = defaultValue(properties.urlSchemeZeroPadding, that.urlSchemeZeroPadding);\n    that._tileDiscardPolicy = properties.tileDiscardPolicy;\n    that._getFeatureInfoFormats = properties.getFeatureInfoFormats;\n    that._subdomains = properties.subdomains;\n\n    if (Array.isArray(that._subdomains)) {\n      that._subdomains = that._subdomains.slice();\n    } else if (defined(that._subdomains) && that._subdomains.length > 0) {\n      that._subdomains = that._subdomains.split(\"\");\n    } else {\n      that._subdomains = [\"a\", \"b\", \"c\"];\n    }\n\n    that._tileWidth = defaultValue(properties.tileWidth, 256);\n    that._tileHeight = defaultValue(properties.tileHeight, 256);\n    that._minimumLevel = defaultValue(properties.minimumLevel, 0);\n    that._maximumLevel = properties.maximumLevel;\n    that._tilingScheme = defaultValue(properties.tilingScheme, new WebMercatorTilingScheme({\n      ellipsoid: properties.ellipsoid\n    }));\n    that._rectangle = defaultValue(properties.rectangle, that._tilingScheme.rectangle);\n    that._rectangle = Rectangle.intersection(that._rectangle, that._tilingScheme.rectangle);\n    that._hasAlphaChannel = defaultValue(properties.hasAlphaChannel, true);\n    var credit = properties.credit;\n\n    if (typeof credit === \"string\") {\n      credit = new Credit(credit);\n    }\n\n    that._credit = credit;\n    that._resource = resource;\n    that._tags = allTags;\n    that._pickFeaturesResource = pickFeaturesResource;\n    that._pickFeaturesTags = allPickFeaturesTags;\n    return true;\n  });\n};\n/**\n * Gets the credits to be displayed when a given tile is displayed.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level;\n * @returns {Credit[]} The credits to be displayed when the tile is displayed.\n *\n * @exception {DeveloperError} <code>getTileCredits</code> must not be called before the imagery provider is ready.\n */\n\n\nUrlTemplateImageryProvider.prototype.getTileCredits = function (x, y, level) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!this.ready) {\n    throw new DeveloperError(\"getTileCredits must not be called before the imagery provider is ready.\");\n  } //>>includeEnd('debug');\n\n\n  return undefined;\n};\n/**\n * Requests the image for a given tile.  This function should\n * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Request} [request] The request object. Intended for internal use only.\n * @returns {Promise.<Image|Canvas>|undefined} A promise for the image that will resolve when the image is available, or\n *          undefined if there are too many active requests to the server, and the request\n *          should be retried later.  The resolved image may be either an\n *          Image or a Canvas DOM object.\n */\n\n\nUrlTemplateImageryProvider.prototype.requestImage = function (x, y, level, request) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!this.ready) {\n    throw new DeveloperError(\"requestImage must not be called before the imagery provider is ready.\");\n  } //>>includeEnd('debug');\n\n\n  return ImageryProvider.loadImage(this, buildImageResource(this, x, y, level, request));\n};\n/**\n * Asynchronously determines what features, if any, are located at a given longitude and latitude within\n * a tile.  This function should not be called before {@link ImageryProvider#ready} returns true.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Number} longitude The longitude at which to pick features.\n * @param {Number} latitude  The latitude at which to pick features.\n * @return {Promise.<ImageryLayerFeatureInfo[]>|undefined} A promise for the picked features that will resolve when the asynchronous\n *                   picking completes.  The resolved value is an array of {@link ImageryLayerFeatureInfo}\n *                   instances.  The array may be empty if no features are found at the given location.\n *                   It may also be undefined if picking is not supported.\n */\n\n\nUrlTemplateImageryProvider.prototype.pickFeatures = function (x, y, level, longitude, latitude) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!this.ready) {\n    throw new DeveloperError(\"pickFeatures must not be called before the imagery provider is ready.\");\n  } //>>includeEnd('debug');\n\n\n  if (!this.enablePickFeatures || !defined(this._pickFeaturesResource) || this._getFeatureInfoFormats.length === 0) {\n    return undefined;\n  }\n\n  var formatIndex = 0;\n  var that = this;\n\n  function handleResponse(format, data) {\n    return format.callback(data);\n  }\n\n  function doRequest() {\n    if (formatIndex >= that._getFeatureInfoFormats.length) {\n      // No valid formats, so no features picked.\n      return when([]);\n    }\n\n    var format = that._getFeatureInfoFormats[formatIndex];\n    var resource = buildPickFeaturesResource(that, x, y, level, longitude, latitude, format.format);\n    ++formatIndex;\n\n    if (format.type === \"json\") {\n      return resource.fetchJson().then(format.callback).otherwise(doRequest);\n    } else if (format.type === \"xml\") {\n      return resource.fetchXML().then(format.callback).otherwise(doRequest);\n    } else if (format.type === \"text\" || format.type === \"html\") {\n      return resource.fetchText().then(format.callback).otherwise(doRequest);\n    }\n\n    return resource.fetch({\n      responseType: format.format\n    }).then(handleResponse.bind(undefined, format)).otherwise(doRequest);\n  }\n\n  return doRequest();\n};\n\nvar degreesScratchComputed = false;\nvar degreesScratch = new Rectangle();\nvar projectedScratchComputed = false;\nvar projectedScratch = new Rectangle();\n\nfunction buildImageResource(imageryProvider, x, y, level, request) {\n  degreesScratchComputed = false;\n  projectedScratchComputed = false;\n  var resource = imageryProvider._resource;\n  var url = resource.getUrlComponent(true);\n  var allTags = imageryProvider._tags;\n  var templateValues = {};\n  var match = url.match(templateRegex);\n\n  if (defined(match)) {\n    match.forEach(function (tag) {\n      var key = tag.substring(1, tag.length - 1); //strip {}\n\n      if (defined(allTags[key])) {\n        templateValues[key] = allTags[key](imageryProvider, x, y, level);\n      }\n    });\n  }\n\n  return resource.getDerivedResource({\n    request: request,\n    templateValues: templateValues\n  });\n}\n\nvar ijScratchComputed = false;\nvar ijScratch = new Cartesian2();\nvar longitudeLatitudeProjectedScratchComputed = false;\n\nfunction buildPickFeaturesResource(imageryProvider, x, y, level, longitude, latitude, format) {\n  degreesScratchComputed = false;\n  projectedScratchComputed = false;\n  ijScratchComputed = false;\n  longitudeLatitudeProjectedScratchComputed = false;\n  var resource = imageryProvider._pickFeaturesResource;\n  var url = resource.getUrlComponent(true);\n  var allTags = imageryProvider._pickFeaturesTags;\n  var templateValues = {};\n  var match = url.match(templateRegex);\n\n  if (defined(match)) {\n    match.forEach(function (tag) {\n      var key = tag.substring(1, tag.length - 1); //strip {}\n\n      if (defined(allTags[key])) {\n        templateValues[key] = allTags[key](imageryProvider, x, y, level, longitude, latitude, format);\n      }\n    });\n  }\n\n  return resource.getDerivedResource({\n    templateValues: templateValues\n  });\n}\n\nfunction padWithZerosIfNecessary(imageryProvider, key, value) {\n  if (imageryProvider && imageryProvider.urlSchemeZeroPadding && imageryProvider.urlSchemeZeroPadding.hasOwnProperty(key)) {\n    var paddingTemplate = imageryProvider.urlSchemeZeroPadding[key];\n\n    if (typeof paddingTemplate === \"string\") {\n      var paddingTemplateWidth = paddingTemplate.length;\n\n      if (paddingTemplateWidth > 1) {\n        value = value.length >= paddingTemplateWidth ? value : new Array(paddingTemplateWidth - value.toString().length + 1).join(\"0\") + value;\n      }\n    }\n  }\n\n  return value;\n}\n\nfunction xTag(imageryProvider, x, y, level) {\n  return padWithZerosIfNecessary(imageryProvider, \"{x}\", x);\n}\n\nfunction reverseXTag(imageryProvider, x, y, level) {\n  var reverseX = imageryProvider.tilingScheme.getNumberOfXTilesAtLevel(level) - x - 1;\n  return padWithZerosIfNecessary(imageryProvider, \"{reverseX}\", reverseX);\n}\n\nfunction yTag(imageryProvider, x, y, level) {\n  return padWithZerosIfNecessary(imageryProvider, \"{y}\", y);\n}\n\nfunction reverseYTag(imageryProvider, x, y, level) {\n  var reverseY = imageryProvider.tilingScheme.getNumberOfYTilesAtLevel(level) - y - 1;\n  return padWithZerosIfNecessary(imageryProvider, \"{reverseY}\", reverseY);\n}\n\nfunction reverseZTag(imageryProvider, x, y, level) {\n  var maximumLevel = imageryProvider.maximumLevel;\n  var reverseZ = defined(maximumLevel) && level < maximumLevel ? maximumLevel - level - 1 : level;\n  return padWithZerosIfNecessary(imageryProvider, \"{reverseZ}\", reverseZ);\n}\n\nfunction zTag(imageryProvider, x, y, level) {\n  return padWithZerosIfNecessary(imageryProvider, \"{z}\", level);\n}\n\nfunction sTag(imageryProvider, x, y, level) {\n  var index = (x + y + level) % imageryProvider._subdomains.length;\n  return imageryProvider._subdomains[index];\n}\n\nfunction computeDegrees(imageryProvider, x, y, level) {\n  if (degreesScratchComputed) {\n    return;\n  }\n\n  imageryProvider.tilingScheme.tileXYToRectangle(x, y, level, degreesScratch);\n  degreesScratch.west = CesiumMath.toDegrees(degreesScratch.west);\n  degreesScratch.south = CesiumMath.toDegrees(degreesScratch.south);\n  degreesScratch.east = CesiumMath.toDegrees(degreesScratch.east);\n  degreesScratch.north = CesiumMath.toDegrees(degreesScratch.north);\n  degreesScratchComputed = true;\n}\n\nfunction westDegreesTag(imageryProvider, x, y, level) {\n  computeDegrees(imageryProvider, x, y, level);\n  return degreesScratch.west;\n}\n\nfunction southDegreesTag(imageryProvider, x, y, level) {\n  computeDegrees(imageryProvider, x, y, level);\n  return degreesScratch.south;\n}\n\nfunction eastDegreesTag(imageryProvider, x, y, level) {\n  computeDegrees(imageryProvider, x, y, level);\n  return degreesScratch.east;\n}\n\nfunction northDegreesTag(imageryProvider, x, y, level) {\n  computeDegrees(imageryProvider, x, y, level);\n  return degreesScratch.north;\n}\n\nfunction computeProjected(imageryProvider, x, y, level) {\n  if (projectedScratchComputed) {\n    return;\n  }\n\n  imageryProvider.tilingScheme.tileXYToNativeRectangle(x, y, level, projectedScratch);\n  projectedScratchComputed = true;\n}\n\nfunction westProjectedTag(imageryProvider, x, y, level) {\n  computeProjected(imageryProvider, x, y, level);\n  return projectedScratch.west;\n}\n\nfunction southProjectedTag(imageryProvider, x, y, level) {\n  computeProjected(imageryProvider, x, y, level);\n  return projectedScratch.south;\n}\n\nfunction eastProjectedTag(imageryProvider, x, y, level) {\n  computeProjected(imageryProvider, x, y, level);\n  return projectedScratch.east;\n}\n\nfunction northProjectedTag(imageryProvider, x, y, level) {\n  computeProjected(imageryProvider, x, y, level);\n  return projectedScratch.north;\n}\n\nfunction widthTag(imageryProvider, x, y, level) {\n  return imageryProvider.tileWidth;\n}\n\nfunction heightTag(imageryProvider, x, y, level) {\n  return imageryProvider.tileHeight;\n}\n\nfunction iTag(imageryProvider, x, y, level, longitude, latitude, format) {\n  computeIJ(imageryProvider, x, y, level, longitude, latitude);\n  return ijScratch.x;\n}\n\nfunction jTag(imageryProvider, x, y, level, longitude, latitude, format) {\n  computeIJ(imageryProvider, x, y, level, longitude, latitude);\n  return ijScratch.y;\n}\n\nfunction reverseITag(imageryProvider, x, y, level, longitude, latitude, format) {\n  computeIJ(imageryProvider, x, y, level, longitude, latitude);\n  return imageryProvider.tileWidth - ijScratch.x - 1;\n}\n\nfunction reverseJTag(imageryProvider, x, y, level, longitude, latitude, format) {\n  computeIJ(imageryProvider, x, y, level, longitude, latitude);\n  return imageryProvider.tileHeight - ijScratch.y - 1;\n}\n\nvar rectangleScratch = new Rectangle();\nvar longitudeLatitudeProjectedScratch = new Cartesian3();\n\nfunction computeIJ(imageryProvider, x, y, level, longitude, latitude, format) {\n  if (ijScratchComputed) {\n    return;\n  }\n\n  computeLongitudeLatitudeProjected(imageryProvider, x, y, level, longitude, latitude);\n  var projected = longitudeLatitudeProjectedScratch;\n  var rectangle = imageryProvider.tilingScheme.tileXYToNativeRectangle(x, y, level, rectangleScratch);\n  ijScratch.x = imageryProvider.tileWidth * (projected.x - rectangle.west) / rectangle.width | 0;\n  ijScratch.y = imageryProvider.tileHeight * (rectangle.north - projected.y) / rectangle.height | 0;\n  ijScratchComputed = true;\n}\n\nfunction longitudeDegreesTag(imageryProvider, x, y, level, longitude, latitude, format) {\n  return CesiumMath.toDegrees(longitude);\n}\n\nfunction latitudeDegreesTag(imageryProvider, x, y, level, longitude, latitude, format) {\n  return CesiumMath.toDegrees(latitude);\n}\n\nfunction longitudeProjectedTag(imageryProvider, x, y, level, longitude, latitude, format) {\n  computeLongitudeLatitudeProjected(imageryProvider, x, y, level, longitude, latitude);\n  return longitudeLatitudeProjectedScratch.x;\n}\n\nfunction latitudeProjectedTag(imageryProvider, x, y, level, longitude, latitude, format) {\n  computeLongitudeLatitudeProjected(imageryProvider, x, y, level, longitude, latitude);\n  return longitudeLatitudeProjectedScratch.y;\n}\n\nvar cartographicScratch = new Cartographic();\n\nfunction computeLongitudeLatitudeProjected(imageryProvider, x, y, level, longitude, latitude, format) {\n  if (longitudeLatitudeProjectedScratchComputed) {\n    return;\n  }\n\n  if (imageryProvider.tilingScheme.projection instanceof GeographicProjection) {\n    longitudeLatitudeProjectedScratch.x = CesiumMath.toDegrees(longitude);\n    longitudeLatitudeProjectedScratch.y = CesiumMath.toDegrees(latitude);\n  } else {\n    var cartographic = cartographicScratch;\n    cartographic.longitude = longitude;\n    cartographic.latitude = latitude;\n    imageryProvider.tilingScheme.projection.project(cartographic, longitudeLatitudeProjectedScratch);\n  }\n\n  longitudeLatitudeProjectedScratchComputed = true;\n}\n\nfunction formatTag(imageryProvider, x, y, level, longitude, latitude, format) {\n  return format;\n}\n\nexport default UrlTemplateImageryProvider;","map":{"version":3,"sources":["C:/Users/passa/Desktop/WaterLevelReact/node_modules/cesium/Source/Scene/UrlTemplateImageryProvider.js"],"names":["Cartesian2","Cartesian3","Cartographic","combine","Credit","defaultValue","defined","DeveloperError","Event","GeographicProjection","CesiumMath","Rectangle","Resource","WebMercatorTilingScheme","when","ImageryProvider","templateRegex","tags","x","xTag","y","yTag","z","zTag","s","sTag","reverseX","reverseXTag","reverseY","reverseYTag","reverseZ","reverseZTag","westDegrees","westDegreesTag","southDegrees","southDegreesTag","eastDegrees","eastDegreesTag","northDegrees","northDegreesTag","westProjected","westProjectedTag","southProjected","southProjectedTag","eastProjected","eastProjectedTag","northProjected","northProjectedTag","width","widthTag","height","heightTag","pickFeaturesTags","i","iTag","j","jTag","reverseI","reverseITag","reverseJ","reverseJTag","longitudeDegrees","longitudeDegreesTag","latitudeDegrees","latitudeDegreesTag","longitudeProjected","longitudeProjectedTag","latitudeProjected","latitudeProjectedTag","format","formatTag","UrlTemplateImageryProvider","options","isPromise","url","_errorEvent","_resource","undefined","_urlSchemeZeroPadding","_pickFeaturesResource","_tileWidth","_tileHeight","_maximumLevel","_minimumLevel","_tilingScheme","_rectangle","_tileDiscardPolicy","_credit","_hasAlphaChannel","_readyPromise","_tags","_pickFeaturesTags","enablePickFeatures","reinitialize","Object","defineProperties","prototype","get","urlSchemeZeroPadding","pickFeaturesUrl","proxy","tileWidth","ready","tileHeight","maximumLevel","minimumLevel","tilingScheme","rectangle","tileDiscardPolicy","errorEvent","readyPromise","credit","hasAlphaChannel","that","then","properties","customTags","allTags","allPickFeaturesTags","resource","createIfNeeded","pickFeaturesResource","_getFeatureInfoFormats","getFeatureInfoFormats","_subdomains","subdomains","Array","isArray","slice","length","split","ellipsoid","intersection","getTileCredits","level","requestImage","request","loadImage","buildImageResource","pickFeatures","longitude","latitude","formatIndex","handleResponse","data","callback","doRequest","buildPickFeaturesResource","type","fetchJson","otherwise","fetchXML","fetchText","fetch","responseType","bind","degreesScratchComputed","degreesScratch","projectedScratchComputed","projectedScratch","imageryProvider","getUrlComponent","templateValues","match","forEach","tag","key","substring","getDerivedResource","ijScratchComputed","ijScratch","longitudeLatitudeProjectedScratchComputed","padWithZerosIfNecessary","value","hasOwnProperty","paddingTemplate","paddingTemplateWidth","toString","join","getNumberOfXTilesAtLevel","getNumberOfYTilesAtLevel","index","computeDegrees","tileXYToRectangle","west","toDegrees","south","east","north","computeProjected","tileXYToNativeRectangle","computeIJ","rectangleScratch","longitudeLatitudeProjectedScratch","computeLongitudeLatitudeProjected","projected","cartographicScratch","projection","cartographic","project"],"mappings":"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","sourcesContent":["import Cartesian2 from \"../Core/Cartesian2.js\";\nimport Cartesian3 from \"../Core/Cartesian3.js\";\nimport Cartographic from \"../Core/Cartographic.js\";\nimport combine from \"../Core/combine.js\";\nimport Credit from \"../Core/Credit.js\";\nimport defaultValue from \"../Core/defaultValue.js\";\nimport defined from \"../Core/defined.js\";\nimport DeveloperError from \"../Core/DeveloperError.js\";\nimport Event from \"../Core/Event.js\";\nimport GeographicProjection from \"../Core/GeographicProjection.js\";\nimport CesiumMath from \"../Core/Math.js\";\nimport Rectangle from \"../Core/Rectangle.js\";\nimport Resource from \"../Core/Resource.js\";\nimport WebMercatorTilingScheme from \"../Core/WebMercatorTilingScheme.js\";\nimport when from \"../ThirdParty/when.js\";\nimport ImageryProvider from \"./ImageryProvider.js\";\n\nvar templateRegex = /{[^}]+}/g;\n\nvar tags = {\n  x: xTag,\n  y: yTag,\n  z: zTag,\n  s: sTag,\n  reverseX: reverseXTag,\n  reverseY: reverseYTag,\n  reverseZ: reverseZTag,\n  westDegrees: westDegreesTag,\n  southDegrees: southDegreesTag,\n  eastDegrees: eastDegreesTag,\n  northDegrees: northDegreesTag,\n  westProjected: westProjectedTag,\n  southProjected: southProjectedTag,\n  eastProjected: eastProjectedTag,\n  northProjected: northProjectedTag,\n  width: widthTag,\n  height: heightTag,\n};\n\nvar pickFeaturesTags = combine(tags, {\n  i: iTag,\n  j: jTag,\n  reverseI: reverseITag,\n  reverseJ: reverseJTag,\n  longitudeDegrees: longitudeDegreesTag,\n  latitudeDegrees: latitudeDegreesTag,\n  longitudeProjected: longitudeProjectedTag,\n  latitudeProjected: latitudeProjectedTag,\n  format: formatTag,\n});\n\n/**\n * Provides imagery by requesting tiles using a specified URL template.\n *\n * @alias UrlTemplateImageryProvider\n * @constructor\n *\n * @param {Promise.<Object>|Object} [options] Object with the following properties:\n * @param {Resource|String} options.url  The URL template to use to request tiles.  It has the following keywords:\n * <ul>\n *     <li><code>{z}</code>: The level of the tile in the tiling scheme.  Level zero is the root of the quadtree pyramid.</li>\n *     <li><code>{x}</code>: The tile X coordinate in the tiling scheme, where 0 is the Westernmost tile.</li>\n *     <li><code>{y}</code>: The tile Y coordinate in the tiling scheme, where 0 is the Northernmost tile.</li>\n *     <li><code>{s}</code>: One of the available subdomains, used to overcome browser limits on the number of simultaneous requests per host.</li>\n *     <li><code>{reverseX}</code>: The tile X coordinate in the tiling scheme, where 0 is the Easternmost tile.</li>\n *     <li><code>{reverseY}</code>: The tile Y coordinate in the tiling scheme, where 0 is the Southernmost tile.</li>\n *     <li><code>{reverseZ}</code>: The level of the tile in the tiling scheme, where level zero is the maximum level of the quadtree pyramid.  In order to use reverseZ, maximumLevel must be defined.</li>\n *     <li><code>{westDegrees}</code>: The Western edge of the tile in geodetic degrees.</li>\n *     <li><code>{southDegrees}</code>: The Southern edge of the tile in geodetic degrees.</li>\n *     <li><code>{eastDegrees}</code>: The Eastern edge of the tile in geodetic degrees.</li>\n *     <li><code>{northDegrees}</code>: The Northern edge of the tile in geodetic degrees.</li>\n *     <li><code>{westProjected}</code>: The Western edge of the tile in projected coordinates of the tiling scheme.</li>\n *     <li><code>{southProjected}</code>: The Southern edge of the tile in projected coordinates of the tiling scheme.</li>\n *     <li><code>{eastProjected}</code>: The Eastern edge of the tile in projected coordinates of the tiling scheme.</li>\n *     <li><code>{northProjected}</code>: The Northern edge of the tile in projected coordinates of the tiling scheme.</li>\n *     <li><code>{width}</code>: The width of each tile in pixels.</li>\n *     <li><code>{height}</code>: The height of each tile in pixels.</li>\n * </ul>\n * @param {Resource|String} [options.pickFeaturesUrl] The URL template to use to pick features.  If this property is not specified,\n *                 {@link UrlTemplateImageryProvider#pickFeatures} will immediately returned undefined, indicating no\n *                 features picked.  The URL template supports all of the keywords supported by the <code>url</code>\n *                 parameter, plus the following:\n * <ul>\n *     <li><code>{i}</code>: The pixel column (horizontal coordinate) of the picked position, where the Westernmost pixel is 0.</li>\n *     <li><code>{j}</code>: The pixel row (vertical coordinate) of the picked position, where the Northernmost pixel is 0.</li>\n *     <li><code>{reverseI}</code>: The pixel column (horizontal coordinate) of the picked position, where the Easternmost pixel is 0.</li>\n *     <li><code>{reverseJ}</code>: The pixel row (vertical coordinate) of the picked position, where the Southernmost pixel is 0.</li>\n *     <li><code>{longitudeDegrees}</code>: The longitude of the picked position in degrees.</li>\n *     <li><code>{latitudeDegrees}</code>: The latitude of the picked position in degrees.</li>\n *     <li><code>{longitudeProjected}</code>: The longitude of the picked position in the projected coordinates of the tiling scheme.</li>\n *     <li><code>{latitudeProjected}</code>: The latitude of the picked position in the projected coordinates of the tiling scheme.</li>\n *     <li><code>{format}</code>: The format in which to get feature information, as specified in the {@link GetFeatureInfoFormat}.</li>\n * </ul>\n * @param {Object} [options.urlSchemeZeroPadding] Gets the URL scheme zero padding for each tile coordinate. The format is '000' where\n * each coordinate will be padded on the left with zeros to match the width of the passed string of zeros. e.g. Setting:\n * urlSchemeZeroPadding : { '{x}' : '0000'}\n * will cause an 'x' value of 12 to return the string '0012' for {x} in the generated URL.\n * It the passed object has the following keywords:\n * <ul>\n *  <li> <code>{z}</code>: The zero padding for the level of the tile in the tiling scheme.</li>\n *  <li> <code>{x}</code>: The zero padding for the tile X coordinate in the tiling scheme.</li>\n *  <li> <code>{y}</code>: The zero padding for the the tile Y coordinate in the tiling scheme.</li>\n *  <li> <code>{reverseX}</code>: The zero padding for the tile reverseX coordinate in the tiling scheme.</li>\n *  <li> <code>{reverseY}</code>: The zero padding for the tile reverseY coordinate in the tiling scheme.</li>\n *  <li> <code>{reverseZ}</code>: The zero padding for the reverseZ coordinate of the tile in the tiling scheme.</li>\n * </ul>\n * @param {String|String[]} [options.subdomains='abc'] The subdomains to use for the <code>{s}</code> placeholder in the URL template.\n *                          If this parameter is a single string, each character in the string is a subdomain.  If it is\n *                          an array, each element in the array is a subdomain.\n * @param {Credit|String} [options.credit=''] A credit for the data source, which is displayed on the canvas.\n * @param {Number} [options.minimumLevel=0] The minimum level-of-detail supported by the imagery provider.  Take care when specifying\n *                 this that the number of tiles at the minimum level is small, such as four or less.  A larger number is likely\n *                 to result in rendering problems.\n * @param {Number} [options.maximumLevel] The maximum level-of-detail supported by the imagery provider, or undefined if there is no limit.\n * @param {Rectangle} [options.rectangle=Rectangle.MAX_VALUE] The rectangle, in radians, covered by the image.\n * @param {TilingScheme} [options.tilingScheme=WebMercatorTilingScheme] The tiling scheme specifying how the ellipsoidal\n * surface is broken into tiles.  If this parameter is not provided, a {@link WebMercatorTilingScheme}\n * is used.\n * @param {Ellipsoid} [options.ellipsoid] The ellipsoid.  If the tilingScheme is specified,\n *                    this parameter is ignored and the tiling scheme's ellipsoid is used instead. If neither\n *                    parameter is specified, the WGS84 ellipsoid is used.\n * @param {Number} [options.tileWidth=256] Pixel width of image tiles.\n * @param {Number} [options.tileHeight=256] Pixel height of image tiles.\n * @param {Boolean} [options.hasAlphaChannel=true] true if the images provided by this imagery provider\n *                  include an alpha channel; otherwise, false.  If this property is false, an alpha channel, if\n *                  present, will be ignored.  If this property is true, any images without an alpha channel will\n *                  be treated as if their alpha is 1.0 everywhere.  When this property is false, memory usage\n *                  and texture upload time are potentially reduced.\n * @param {GetFeatureInfoFormat[]} [options.getFeatureInfoFormats] The formats in which to get feature information at a\n *                                 specific location when {@link UrlTemplateImageryProvider#pickFeatures} is invoked.  If this\n *                                 parameter is not specified, feature picking is disabled.\n * @param {Boolean} [options.enablePickFeatures=true] If true, {@link UrlTemplateImageryProvider#pickFeatures} will\n *        request the <code>options.pickFeaturesUrl</code> and attempt to interpret the features included in the response.  If false,\n *        {@link UrlTemplateImageryProvider#pickFeatures} will immediately return undefined (indicating no pickable\n *        features) without communicating with the server.  Set this property to false if you know your data\n *        source does not support picking features or if you don't want this provider's features to be pickable. Note\n *        that this can be dynamically overridden by modifying the {@link UriTemplateImageryProvider#enablePickFeatures}\n *        property.\n * @param {Object} [options.customTags] Allow to replace custom keywords in the URL template. The object must have strings as keys and functions as values.\n *\n *\n * @example\n * // Access Natural Earth II imagery, which uses a TMS tiling scheme and Geographic (EPSG:4326) project\n * var tms = new Cesium.UrlTemplateImageryProvider({\n *     url : Cesium.buildModuleUrl('Assets/Textures/NaturalEarthII') + '/{z}/{x}/{reverseY}.jpg',\n *     credit : 'Â© Analytical Graphics, Inc.',\n *     tilingScheme : new Cesium.GeographicTilingScheme(),\n *     maximumLevel : 5\n * });\n * // Access the CartoDB Positron basemap, which uses an OpenStreetMap-like tiling scheme.\n * var positron = new Cesium.UrlTemplateImageryProvider({\n *     url : 'http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png',\n *     credit : 'Map tiles by CartoDB, under CC BY 3.0. Data by OpenStreetMap, under ODbL.'\n * });\n * // Access a Web Map Service (WMS) server.\n * var wms = new Cesium.UrlTemplateImageryProvider({\n *    url : 'https://programs.communications.gov.au/geoserver/ows?tiled=true&' +\n *          'transparent=true&format=image%2Fpng&exceptions=application%2Fvnd.ogc.se_xml&' +\n *          'styles=&service=WMS&version=1.1.1&request=GetMap&' +\n *          'layers=public%3AMyBroadband_Availability&srs=EPSG%3A3857&' +\n *          'bbox={westProjected}%2C{southProjected}%2C{eastProjected}%2C{northProjected}&' +\n *          'width=256&height=256',\n *    rectangle : Cesium.Rectangle.fromDegrees(96.799393, -43.598214999057824, 153.63925700000001, -9.2159219997013)\n * });\n * // Using custom tags in your template url.\n * var custom = new Cesium.UrlTemplateImageryProvider({\n *    url : 'https://yoururl/{Time}/{z}/{y}/{x}.png',\n *    customTags : {\n *        Time: function(imageryProvider, x, y, level) {\n *            return '20171231'\n *        }\n *    }\n * });\n *\n * @see ArcGisMapServerImageryProvider\n * @see BingMapsImageryProvider\n * @see GoogleEarthEnterpriseMapsProvider\n * @see OpenStreetMapImageryProvider\n * @see SingleTileImageryProvider\n * @see TileMapServiceImageryProvider\n * @see WebMapServiceImageryProvider\n * @see WebMapTileServiceImageryProvider\n */\nfunction UrlTemplateImageryProvider(options) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(options)) {\n    throw new DeveloperError(\"options is required.\");\n  }\n  if (!when.isPromise(options) && !defined(options.url)) {\n    throw new DeveloperError(\"options is required.\");\n  }\n  //>>includeEnd('debug');\n\n  this._errorEvent = new Event();\n\n  this._resource = undefined;\n  this._urlSchemeZeroPadding = undefined;\n  this._pickFeaturesResource = undefined;\n  this._tileWidth = undefined;\n  this._tileHeight = undefined;\n  this._maximumLevel = undefined;\n  this._minimumLevel = undefined;\n  this._tilingScheme = undefined;\n  this._rectangle = undefined;\n  this._tileDiscardPolicy = undefined;\n  this._credit = undefined;\n  this._hasAlphaChannel = undefined;\n  this._readyPromise = undefined;\n  this._tags = undefined;\n  this._pickFeaturesTags = undefined;\n\n  /**\n   * Gets or sets a value indicating whether feature picking is enabled.  If true, {@link UrlTemplateImageryProvider#pickFeatures} will\n   * request the <code>options.pickFeaturesUrl</code> and attempt to interpret the features included in the response.  If false,\n   * {@link UrlTemplateImageryProvider#pickFeatures} will immediately return undefined (indicating no pickable\n   * features) without communicating with the server.  Set this property to false if you know your data\n   * source does not support picking features or if you don't want this provider's features to be pickable.\n   * @type {Boolean}\n   * @default true\n   */\n  this.enablePickFeatures = true;\n\n  this.reinitialize(options);\n}\n\nObject.defineProperties(UrlTemplateImageryProvider.prototype, {\n  /**\n   * Gets the URL template to use to request tiles.  It has the following keywords:\n   * <ul>\n   *  <li> <code>{z}</code>: The level of the tile in the tiling scheme.  Level zero is the root of the quadtree pyramid.</li>\n   *  <li> <code>{x}</code>: The tile X coordinate in the tiling scheme, where 0 is the Westernmost tile.</li>\n   *  <li> <code>{y}</code>: The tile Y coordinate in the tiling scheme, where 0 is the Northernmost tile.</li>\n   *  <li> <code>{s}</code>: One of the available subdomains, used to overcome browser limits on the number of simultaneous requests per host.</li>\n   *  <li> <code>{reverseX}</code>: The tile X coordinate in the tiling scheme, where 0 is the Easternmost tile.</li>\n   *  <li> <code>{reverseY}</code>: The tile Y coordinate in the tiling scheme, where 0 is the Southernmost tile.</li>\n   *  <li> <code>{reverseZ}</code>: The level of the tile in the tiling scheme, where level zero is the maximum level of the quadtree pyramid.  In order to use reverseZ, maximumLevel must be defined.</li>\n   *  <li> <code>{westDegrees}</code>: The Western edge of the tile in geodetic degrees.</li>\n   *  <li> <code>{southDegrees}</code>: The Southern edge of the tile in geodetic degrees.</li>\n   *  <li> <code>{eastDegrees}</code>: The Eastern edge of the tile in geodetic degrees.</li>\n   *  <li> <code>{northDegrees}</code>: The Northern edge of the tile in geodetic degrees.</li>\n   *  <li> <code>{westProjected}</code>: The Western edge of the tile in projected coordinates of the tiling scheme.</li>\n   *  <li> <code>{southProjected}</code>: The Southern edge of the tile in projected coordinates of the tiling scheme.</li>\n   *  <li> <code>{eastProjected}</code>: The Eastern edge of the tile in projected coordinates of the tiling scheme.</li>\n   *  <li> <code>{northProjected}</code>: The Northern edge of the tile in projected coordinates of the tiling scheme.</li>\n   *  <li> <code>{width}</code>: The width of each tile in pixels.</li>\n   *  <li> <code>{height}</code>: The height of each tile in pixels.</li>\n   * </ul>\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  url: {\n    get: function () {\n      return this._resource.url;\n    },\n  },\n\n  /**\n   * Gets the URL scheme zero padding for each tile coordinate. The format is '000' where each coordinate will be padded on\n   * the left with zeros to match the width of the passed string of zeros. e.g. Setting:\n   * urlSchemeZeroPadding : { '{x}' : '0000'}\n   * will cause an 'x' value of 12 to return the string '0012' for {x} in the generated URL.\n   * It has the following keywords:\n   * <ul>\n   *  <li> <code>{z}</code>: The zero padding for the level of the tile in the tiling scheme.</li>\n   *  <li> <code>{x}</code>: The zero padding for the tile X coordinate in the tiling scheme.</li>\n   *  <li> <code>{y}</code>: The zero padding for the the tile Y coordinate in the tiling scheme.</li>\n   *  <li> <code>{reverseX}</code>: The zero padding for the tile reverseX coordinate in the tiling scheme.</li>\n   *  <li> <code>{reverseY}</code>: The zero padding for the tile reverseY coordinate in the tiling scheme.</li>\n   *  <li> <code>{reverseZ}</code>: The zero padding for the reverseZ coordinate of the tile in the tiling scheme.</li>\n   * </ul>\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Object}\n   * @readonly\n   */\n  urlSchemeZeroPadding: {\n    get: function () {\n      return this._urlSchemeZeroPadding;\n    },\n  },\n\n  /**\n   * Gets the URL template to use to use to pick features.  If this property is not specified,\n   * {@link UrlTemplateImageryProvider#pickFeatures} will immediately returned undefined, indicating no\n   * features picked.  The URL template supports all of the keywords supported by the\n   * {@link UrlTemplateImageryProvider#url} property, plus the following:\n   * <ul>\n   *     <li><code>{i}</code>: The pixel column (horizontal coordinate) of the picked position, where the Westernmost pixel is 0.</li>\n   *     <li><code>{j}</code>: The pixel row (vertical coordinate) of the picked position, where the Northernmost pixel is 0.</li>\n   *     <li><code>{reverseI}</code>: The pixel column (horizontal coordinate) of the picked position, where the Easternmost pixel is 0.</li>\n   *     <li><code>{reverseJ}</code>: The pixel row (vertical coordinate) of the picked position, where the Southernmost pixel is 0.</li>\n   *     <li><code>{longitudeDegrees}</code>: The longitude of the picked position in degrees.</li>\n   *     <li><code>{latitudeDegrees}</code>: The latitude of the picked position in degrees.</li>\n   *     <li><code>{longitudeProjected}</code>: The longitude of the picked position in the projected coordinates of the tiling scheme.</li>\n   *     <li><code>{latitudeProjected}</code>: The latitude of the picked position in the projected coordinates of the tiling scheme.</li>\n   *     <li><code>{format}</code>: The format in which to get feature information, as specified in the {@link GetFeatureInfoFormat}.</li>\n   * </ul>\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  pickFeaturesUrl: {\n    get: function () {\n      return this._pickFeaturesResource.url;\n    },\n  },\n\n  /**\n   * Gets the proxy used by this provider.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Proxy}\n   * @readonly\n   * @default undefined\n   */\n  proxy: {\n    get: function () {\n      return this._resource.proxy;\n    },\n  },\n\n  /**\n   * Gets the width of each tile, in pixels. This function should\n   * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   * @default 256\n   */\n  tileWidth: {\n    get: function () {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\n          \"tileWidth must not be called before the imagery provider is ready.\"\n        );\n      }\n      //>>includeEnd('debug');\n      return this._tileWidth;\n    },\n  },\n\n  /**\n   * Gets the height of each tile, in pixels.  This function should\n   * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   * @default 256\n   */\n  tileHeight: {\n    get: function () {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\n          \"tileHeight must not be called before the imagery provider is ready.\"\n        );\n      }\n      //>>includeEnd('debug');\n      return this._tileHeight;\n    },\n  },\n\n  /**\n   * Gets the maximum level-of-detail that can be requested, or undefined if there is no limit.\n   * This function should not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   * @default undefined\n   */\n  maximumLevel: {\n    get: function () {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\n          \"maximumLevel must not be called before the imagery provider is ready.\"\n        );\n      }\n      //>>includeEnd('debug');\n      return this._maximumLevel;\n    },\n  },\n\n  /**\n   * Gets the minimum level-of-detail that can be requested.  This function should\n   * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   * @default 0\n   */\n  minimumLevel: {\n    get: function () {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\n          \"minimumLevel must not be called before the imagery provider is ready.\"\n        );\n      }\n      //>>includeEnd('debug');\n      return this._minimumLevel;\n    },\n  },\n\n  /**\n   * Gets the tiling scheme used by this provider.  This function should\n   * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {TilingScheme}\n   * @readonly\n   * @default new WebMercatorTilingScheme()\n   */\n  tilingScheme: {\n    get: function () {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\n          \"tilingScheme must not be called before the imagery provider is ready.\"\n        );\n      }\n      //>>includeEnd('debug');\n      return this._tilingScheme;\n    },\n  },\n\n  /**\n   * Gets the rectangle, in radians, of the imagery provided by this instance.  This function should\n   * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Rectangle}\n   * @readonly\n   * @default tilingScheme.rectangle\n   */\n  rectangle: {\n    get: function () {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\n          \"rectangle must not be called before the imagery provider is ready.\"\n        );\n      }\n      //>>includeEnd('debug');\n      return this._rectangle;\n    },\n  },\n\n  /**\n   * Gets the tile discard policy.  If not undefined, the discard policy is responsible\n   * for filtering out \"missing\" tiles via its shouldDiscardImage function.  If this function\n   * returns undefined, no tiles are filtered.  This function should\n   * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {TileDiscardPolicy}\n   * @readonly\n   * @default undefined\n   */\n  tileDiscardPolicy: {\n    get: function () {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\n          \"tileDiscardPolicy must not be called before the imagery provider is ready.\"\n        );\n      }\n      //>>includeEnd('debug');\n      return this._tileDiscardPolicy;\n    },\n  },\n\n  /**\n   * Gets an event that is raised when the imagery provider encounters an asynchronous error.  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Event}\n   * @readonly\n   */\n  errorEvent: {\n    get: function () {\n      return this._errorEvent;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function () {\n      return defined(this._resource);\n    },\n  },\n\n  /**\n   * Gets a promise that resolves to true when the provider is ready for use.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise;\n    },\n  },\n\n  /**\n   * Gets the credit to display when this imagery provider is active.  Typically this is used to credit\n   * the source of the imagery.  This function should not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Credit}\n   * @readonly\n   * @default undefined\n   */\n  credit: {\n    get: function () {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\n          \"credit must not be called before the imagery provider is ready.\"\n        );\n      }\n      //>>includeEnd('debug');\n      return this._credit;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the images provided by this imagery provider\n   * include an alpha channel.  If this property is false, an alpha channel, if present, will\n   * be ignored.  If this property is true, any images without an alpha channel will be treated\n   * as if their alpha is 1.0 everywhere.  When this property is false, memory usage\n   * and texture upload time are reduced.  This function should\n   * not be called before {@link ImageryProvider#ready} returns true.\n   * @memberof UrlTemplateImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   * @default true\n   */\n  hasAlphaChannel: {\n    get: function () {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\n          \"hasAlphaChannel must not be called before the imagery provider is ready.\"\n        );\n      }\n      //>>includeEnd('debug');\n      return this._hasAlphaChannel;\n    },\n  },\n});\n\n/**\n * Reinitializes this instance.  Reinitializing an instance already in use is supported, but it is not\n * recommended because existing tiles provided by the imagery provider will not be updated.\n *\n * @param {Promise.<Object>|Object} options Any of the options that may be passed to the {@link UrlTemplateImageryProvider} constructor.\n */\nUrlTemplateImageryProvider.prototype.reinitialize = function (options) {\n  var that = this;\n  that._readyPromise = when(options).then(function (properties) {\n    //>>includeStart('debug', pragmas.debug);\n    if (!defined(properties)) {\n      throw new DeveloperError(\"options is required.\");\n    }\n    if (!defined(properties.url)) {\n      throw new DeveloperError(\"options.url is required.\");\n    }\n    //>>includeEnd('debug');\n\n    var customTags = properties.customTags;\n    var allTags = combine(tags, customTags);\n    var allPickFeaturesTags = combine(pickFeaturesTags, customTags);\n    var resource = Resource.createIfNeeded(properties.url);\n    var pickFeaturesResource = Resource.createIfNeeded(\n      properties.pickFeaturesUrl\n    );\n\n    that.enablePickFeatures = defaultValue(\n      properties.enablePickFeatures,\n      that.enablePickFeatures\n    );\n    that._urlSchemeZeroPadding = defaultValue(\n      properties.urlSchemeZeroPadding,\n      that.urlSchemeZeroPadding\n    );\n    that._tileDiscardPolicy = properties.tileDiscardPolicy;\n    that._getFeatureInfoFormats = properties.getFeatureInfoFormats;\n\n    that._subdomains = properties.subdomains;\n    if (Array.isArray(that._subdomains)) {\n      that._subdomains = that._subdomains.slice();\n    } else if (defined(that._subdomains) && that._subdomains.length > 0) {\n      that._subdomains = that._subdomains.split(\"\");\n    } else {\n      that._subdomains = [\"a\", \"b\", \"c\"];\n    }\n\n    that._tileWidth = defaultValue(properties.tileWidth, 256);\n    that._tileHeight = defaultValue(properties.tileHeight, 256);\n    that._minimumLevel = defaultValue(properties.minimumLevel, 0);\n    that._maximumLevel = properties.maximumLevel;\n    that._tilingScheme = defaultValue(\n      properties.tilingScheme,\n      new WebMercatorTilingScheme({ ellipsoid: properties.ellipsoid })\n    );\n    that._rectangle = defaultValue(\n      properties.rectangle,\n      that._tilingScheme.rectangle\n    );\n    that._rectangle = Rectangle.intersection(\n      that._rectangle,\n      that._tilingScheme.rectangle\n    );\n    that._hasAlphaChannel = defaultValue(properties.hasAlphaChannel, true);\n\n    var credit = properties.credit;\n    if (typeof credit === \"string\") {\n      credit = new Credit(credit);\n    }\n    that._credit = credit;\n\n    that._resource = resource;\n    that._tags = allTags;\n    that._pickFeaturesResource = pickFeaturesResource;\n    that._pickFeaturesTags = allPickFeaturesTags;\n\n    return true;\n  });\n};\n\n/**\n * Gets the credits to be displayed when a given tile is displayed.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level;\n * @returns {Credit[]} The credits to be displayed when the tile is displayed.\n *\n * @exception {DeveloperError} <code>getTileCredits</code> must not be called before the imagery provider is ready.\n */\nUrlTemplateImageryProvider.prototype.getTileCredits = function (x, y, level) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!this.ready) {\n    throw new DeveloperError(\n      \"getTileCredits must not be called before the imagery provider is ready.\"\n    );\n  }\n  //>>includeEnd('debug');\n  return undefined;\n};\n\n/**\n * Requests the image for a given tile.  This function should\n * not be called before {@link UrlTemplateImageryProvider#ready} returns true.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Request} [request] The request object. Intended for internal use only.\n * @returns {Promise.<Image|Canvas>|undefined} A promise for the image that will resolve when the image is available, or\n *          undefined if there are too many active requests to the server, and the request\n *          should be retried later.  The resolved image may be either an\n *          Image or a Canvas DOM object.\n */\nUrlTemplateImageryProvider.prototype.requestImage = function (\n  x,\n  y,\n  level,\n  request\n) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!this.ready) {\n    throw new DeveloperError(\n      \"requestImage must not be called before the imagery provider is ready.\"\n    );\n  }\n  //>>includeEnd('debug');\n  return ImageryProvider.loadImage(\n    this,\n    buildImageResource(this, x, y, level, request)\n  );\n};\n\n/**\n * Asynchronously determines what features, if any, are located at a given longitude and latitude within\n * a tile.  This function should not be called before {@link ImageryProvider#ready} returns true.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Number} longitude The longitude at which to pick features.\n * @param {Number} latitude  The latitude at which to pick features.\n * @return {Promise.<ImageryLayerFeatureInfo[]>|undefined} A promise for the picked features that will resolve when the asynchronous\n *                   picking completes.  The resolved value is an array of {@link ImageryLayerFeatureInfo}\n *                   instances.  The array may be empty if no features are found at the given location.\n *                   It may also be undefined if picking is not supported.\n */\nUrlTemplateImageryProvider.prototype.pickFeatures = function (\n  x,\n  y,\n  level,\n  longitude,\n  latitude\n) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!this.ready) {\n    throw new DeveloperError(\n      \"pickFeatures must not be called before the imagery provider is ready.\"\n    );\n  }\n  //>>includeEnd('debug');\n\n  if (\n    !this.enablePickFeatures ||\n    !defined(this._pickFeaturesResource) ||\n    this._getFeatureInfoFormats.length === 0\n  ) {\n    return undefined;\n  }\n\n  var formatIndex = 0;\n\n  var that = this;\n\n  function handleResponse(format, data) {\n    return format.callback(data);\n  }\n\n  function doRequest() {\n    if (formatIndex >= that._getFeatureInfoFormats.length) {\n      // No valid formats, so no features picked.\n      return when([]);\n    }\n\n    var format = that._getFeatureInfoFormats[formatIndex];\n    var resource = buildPickFeaturesResource(\n      that,\n      x,\n      y,\n      level,\n      longitude,\n      latitude,\n      format.format\n    );\n\n    ++formatIndex;\n\n    if (format.type === \"json\") {\n      return resource.fetchJson().then(format.callback).otherwise(doRequest);\n    } else if (format.type === \"xml\") {\n      return resource.fetchXML().then(format.callback).otherwise(doRequest);\n    } else if (format.type === \"text\" || format.type === \"html\") {\n      return resource.fetchText().then(format.callback).otherwise(doRequest);\n    }\n    return resource\n      .fetch({\n        responseType: format.format,\n      })\n      .then(handleResponse.bind(undefined, format))\n      .otherwise(doRequest);\n  }\n\n  return doRequest();\n};\n\nvar degreesScratchComputed = false;\nvar degreesScratch = new Rectangle();\nvar projectedScratchComputed = false;\nvar projectedScratch = new Rectangle();\n\nfunction buildImageResource(imageryProvider, x, y, level, request) {\n  degreesScratchComputed = false;\n  projectedScratchComputed = false;\n\n  var resource = imageryProvider._resource;\n  var url = resource.getUrlComponent(true);\n  var allTags = imageryProvider._tags;\n  var templateValues = {};\n\n  var match = url.match(templateRegex);\n  if (defined(match)) {\n    match.forEach(function (tag) {\n      var key = tag.substring(1, tag.length - 1); //strip {}\n      if (defined(allTags[key])) {\n        templateValues[key] = allTags[key](imageryProvider, x, y, level);\n      }\n    });\n  }\n\n  return resource.getDerivedResource({\n    request: request,\n    templateValues: templateValues,\n  });\n}\n\nvar ijScratchComputed = false;\nvar ijScratch = new Cartesian2();\nvar longitudeLatitudeProjectedScratchComputed = false;\n\nfunction buildPickFeaturesResource(\n  imageryProvider,\n  x,\n  y,\n  level,\n  longitude,\n  latitude,\n  format\n) {\n  degreesScratchComputed = false;\n  projectedScratchComputed = false;\n  ijScratchComputed = false;\n  longitudeLatitudeProjectedScratchComputed = false;\n\n  var resource = imageryProvider._pickFeaturesResource;\n  var url = resource.getUrlComponent(true);\n  var allTags = imageryProvider._pickFeaturesTags;\n  var templateValues = {};\n  var match = url.match(templateRegex);\n  if (defined(match)) {\n    match.forEach(function (tag) {\n      var key = tag.substring(1, tag.length - 1); //strip {}\n      if (defined(allTags[key])) {\n        templateValues[key] = allTags[key](\n          imageryProvider,\n          x,\n          y,\n          level,\n          longitude,\n          latitude,\n          format\n        );\n      }\n    });\n  }\n\n  return resource.getDerivedResource({\n    templateValues: templateValues,\n  });\n}\n\nfunction padWithZerosIfNecessary(imageryProvider, key, value) {\n  if (\n    imageryProvider &&\n    imageryProvider.urlSchemeZeroPadding &&\n    imageryProvider.urlSchemeZeroPadding.hasOwnProperty(key)\n  ) {\n    var paddingTemplate = imageryProvider.urlSchemeZeroPadding[key];\n    if (typeof paddingTemplate === \"string\") {\n      var paddingTemplateWidth = paddingTemplate.length;\n      if (paddingTemplateWidth > 1) {\n        value =\n          value.length >= paddingTemplateWidth\n            ? value\n            : new Array(\n                paddingTemplateWidth - value.toString().length + 1\n              ).join(\"0\") + value;\n      }\n    }\n  }\n  return value;\n}\n\nfunction xTag(imageryProvider, x, y, level) {\n  return padWithZerosIfNecessary(imageryProvider, \"{x}\", x);\n}\n\nfunction reverseXTag(imageryProvider, x, y, level) {\n  var reverseX =\n    imageryProvider.tilingScheme.getNumberOfXTilesAtLevel(level) - x - 1;\n  return padWithZerosIfNecessary(imageryProvider, \"{reverseX}\", reverseX);\n}\n\nfunction yTag(imageryProvider, x, y, level) {\n  return padWithZerosIfNecessary(imageryProvider, \"{y}\", y);\n}\n\nfunction reverseYTag(imageryProvider, x, y, level) {\n  var reverseY =\n    imageryProvider.tilingScheme.getNumberOfYTilesAtLevel(level) - y - 1;\n  return padWithZerosIfNecessary(imageryProvider, \"{reverseY}\", reverseY);\n}\n\nfunction reverseZTag(imageryProvider, x, y, level) {\n  var maximumLevel = imageryProvider.maximumLevel;\n  var reverseZ =\n    defined(maximumLevel) && level < maximumLevel\n      ? maximumLevel - level - 1\n      : level;\n  return padWithZerosIfNecessary(imageryProvider, \"{reverseZ}\", reverseZ);\n}\n\nfunction zTag(imageryProvider, x, y, level) {\n  return padWithZerosIfNecessary(imageryProvider, \"{z}\", level);\n}\n\nfunction sTag(imageryProvider, x, y, level) {\n  var index = (x + y + level) % imageryProvider._subdomains.length;\n  return imageryProvider._subdomains[index];\n}\n\nfunction computeDegrees(imageryProvider, x, y, level) {\n  if (degreesScratchComputed) {\n    return;\n  }\n\n  imageryProvider.tilingScheme.tileXYToRectangle(x, y, level, degreesScratch);\n  degreesScratch.west = CesiumMath.toDegrees(degreesScratch.west);\n  degreesScratch.south = CesiumMath.toDegrees(degreesScratch.south);\n  degreesScratch.east = CesiumMath.toDegrees(degreesScratch.east);\n  degreesScratch.north = CesiumMath.toDegrees(degreesScratch.north);\n\n  degreesScratchComputed = true;\n}\n\nfunction westDegreesTag(imageryProvider, x, y, level) {\n  computeDegrees(imageryProvider, x, y, level);\n  return degreesScratch.west;\n}\n\nfunction southDegreesTag(imageryProvider, x, y, level) {\n  computeDegrees(imageryProvider, x, y, level);\n  return degreesScratch.south;\n}\n\nfunction eastDegreesTag(imageryProvider, x, y, level) {\n  computeDegrees(imageryProvider, x, y, level);\n  return degreesScratch.east;\n}\n\nfunction northDegreesTag(imageryProvider, x, y, level) {\n  computeDegrees(imageryProvider, x, y, level);\n  return degreesScratch.north;\n}\n\nfunction computeProjected(imageryProvider, x, y, level) {\n  if (projectedScratchComputed) {\n    return;\n  }\n\n  imageryProvider.tilingScheme.tileXYToNativeRectangle(\n    x,\n    y,\n    level,\n    projectedScratch\n  );\n\n  projectedScratchComputed = true;\n}\n\nfunction westProjectedTag(imageryProvider, x, y, level) {\n  computeProjected(imageryProvider, x, y, level);\n  return projectedScratch.west;\n}\n\nfunction southProjectedTag(imageryProvider, x, y, level) {\n  computeProjected(imageryProvider, x, y, level);\n  return projectedScratch.south;\n}\n\nfunction eastProjectedTag(imageryProvider, x, y, level) {\n  computeProjected(imageryProvider, x, y, level);\n  return projectedScratch.east;\n}\n\nfunction northProjectedTag(imageryProvider, x, y, level) {\n  computeProjected(imageryProvider, x, y, level);\n  return projectedScratch.north;\n}\n\nfunction widthTag(imageryProvider, x, y, level) {\n  return imageryProvider.tileWidth;\n}\n\nfunction heightTag(imageryProvider, x, y, level) {\n  return imageryProvider.tileHeight;\n}\n\nfunction iTag(imageryProvider, x, y, level, longitude, latitude, format) {\n  computeIJ(imageryProvider, x, y, level, longitude, latitude);\n  return ijScratch.x;\n}\n\nfunction jTag(imageryProvider, x, y, level, longitude, latitude, format) {\n  computeIJ(imageryProvider, x, y, level, longitude, latitude);\n  return ijScratch.y;\n}\n\nfunction reverseITag(\n  imageryProvider,\n  x,\n  y,\n  level,\n  longitude,\n  latitude,\n  format\n) {\n  computeIJ(imageryProvider, x, y, level, longitude, latitude);\n  return imageryProvider.tileWidth - ijScratch.x - 1;\n}\n\nfunction reverseJTag(\n  imageryProvider,\n  x,\n  y,\n  level,\n  longitude,\n  latitude,\n  format\n) {\n  computeIJ(imageryProvider, x, y, level, longitude, latitude);\n  return imageryProvider.tileHeight - ijScratch.y - 1;\n}\n\nvar rectangleScratch = new Rectangle();\nvar longitudeLatitudeProjectedScratch = new Cartesian3();\n\nfunction computeIJ(imageryProvider, x, y, level, longitude, latitude, format) {\n  if (ijScratchComputed) {\n    return;\n  }\n\n  computeLongitudeLatitudeProjected(\n    imageryProvider,\n    x,\n    y,\n    level,\n    longitude,\n    latitude\n  );\n  var projected = longitudeLatitudeProjectedScratch;\n\n  var rectangle = imageryProvider.tilingScheme.tileXYToNativeRectangle(\n    x,\n    y,\n    level,\n    rectangleScratch\n  );\n  ijScratch.x =\n    ((imageryProvider.tileWidth * (projected.x - rectangle.west)) /\n      rectangle.width) |\n    0;\n  ijScratch.y =\n    ((imageryProvider.tileHeight * (rectangle.north - projected.y)) /\n      rectangle.height) |\n    0;\n  ijScratchComputed = true;\n}\n\nfunction longitudeDegreesTag(\n  imageryProvider,\n  x,\n  y,\n  level,\n  longitude,\n  latitude,\n  format\n) {\n  return CesiumMath.toDegrees(longitude);\n}\n\nfunction latitudeDegreesTag(\n  imageryProvider,\n  x,\n  y,\n  level,\n  longitude,\n  latitude,\n  format\n) {\n  return CesiumMath.toDegrees(latitude);\n}\n\nfunction longitudeProjectedTag(\n  imageryProvider,\n  x,\n  y,\n  level,\n  longitude,\n  latitude,\n  format\n) {\n  computeLongitudeLatitudeProjected(\n    imageryProvider,\n    x,\n    y,\n    level,\n    longitude,\n    latitude\n  );\n  return longitudeLatitudeProjectedScratch.x;\n}\n\nfunction latitudeProjectedTag(\n  imageryProvider,\n  x,\n  y,\n  level,\n  longitude,\n  latitude,\n  format\n) {\n  computeLongitudeLatitudeProjected(\n    imageryProvider,\n    x,\n    y,\n    level,\n    longitude,\n    latitude\n  );\n  return longitudeLatitudeProjectedScratch.y;\n}\n\nvar cartographicScratch = new Cartographic();\n\nfunction computeLongitudeLatitudeProjected(\n  imageryProvider,\n  x,\n  y,\n  level,\n  longitude,\n  latitude,\n  format\n) {\n  if (longitudeLatitudeProjectedScratchComputed) {\n    return;\n  }\n\n  if (imageryProvider.tilingScheme.projection instanceof GeographicProjection) {\n    longitudeLatitudeProjectedScratch.x = CesiumMath.toDegrees(longitude);\n    longitudeLatitudeProjectedScratch.y = CesiumMath.toDegrees(latitude);\n  } else {\n    var cartographic = cartographicScratch;\n    cartographic.longitude = longitude;\n    cartographic.latitude = latitude;\n    imageryProvider.tilingScheme.projection.project(\n      cartographic,\n      longitudeLatitudeProjectedScratch\n    );\n  }\n\n  longitudeLatitudeProjectedScratchComputed = true;\n}\n\nfunction formatTag(imageryProvider, x, y, level, longitude, latitude, format) {\n  return format;\n}\nexport default UrlTemplateImageryProvider;\n"]},"metadata":{},"sourceType":"module"}