{"ast":null,"code":"import Credit from \"../Core/Credit.js\";\nimport defaultValue from \"../Core/defaultValue.js\";\nimport defined from \"../Core/defined.js\";\nimport DeveloperError from \"../Core/DeveloperError.js\";\nimport MapboxApi from \"../Core/MapboxApi.js\";\nimport Resource from \"../Core/Resource.js\";\nimport UrlTemplateImageryProvider from \"./UrlTemplateImageryProvider.js\";\nvar trailingSlashRegex = /\\/$/;\nvar defaultCredit = new Credit('&copy; <a href=\"https://www.mapbox.com/about/maps/\">Mapbox</a> &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> <strong><a href=\"https://www.mapbox.com/map-feedback/\">Improve this map</a></strong>');\n/**\n * Provides tiled imagery hosted by Mapbox.\n *\n * @alias MapboxImageryProvider\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {String} [options.url='https://api.mapbox.com/v4/'] The Mapbox server url.\n * @param {String} options.mapId The Mapbox Map ID.\n * @param {String} [options.accessToken] The public access token for the imagery.\n * @param {String} [options.format='png'] The format of the image request.\n * @param {Ellipsoid} [options.ellipsoid] The ellipsoid.  If not specified, the WGS84 ellipsoid is used.\n * @param {Number} [options.minimumLevel=0] The minimum level-of-detail supported by the imagery provider.  Take care when specifying\n *                 this that the number of tiles at the minimum level is small, such as four or less.  A larger number is likely\n *                 to result in rendering problems.\n * @param {Number} [options.maximumLevel] The maximum level-of-detail supported by the imagery provider, or undefined if there is no limit.\n * @param {Rectangle} [options.rectangle=Rectangle.MAX_VALUE] The rectangle, in radians, covered by the image.\n * @param {Credit|String} [options.credit] A credit for the data source, which is displayed on the canvas.\n *\n *\n * @example\n * // Mapbox tile provider\n * var mapbox = new Cesium.MapboxImageryProvider({\n *     mapId: 'mapbox.streets',\n *     accessToken: 'thisIsMyAccessToken'\n * });\n *\n * @see {@link https://www.mapbox.com/developers/api/maps/#tiles}\n * @see {@link https://www.mapbox.com/developers/api/#access-tokens}\n */\n\nfunction MapboxImageryProvider(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  var mapId = options.mapId; //>>includeStart('debug', pragmas.debug);\n\n  if (!defined(mapId)) {\n    throw new DeveloperError(\"options.mapId is required.\");\n  } //>>includeEnd('debug');\n\n\n  var resource = Resource.createIfNeeded(defaultValue(options.url, \"https://{s}.tiles.mapbox.com/v4/\"));\n  var accessToken = MapboxApi.getAccessToken(options.accessToken);\n  this._mapId = mapId;\n  this._accessToken = accessToken;\n  this._accessTokenErrorCredit = Credit.clone(MapboxApi.getErrorCredit(options.accessToken));\n  var format = defaultValue(options.format, \"png\");\n\n  if (!/\\./.test(format)) {\n    format = \".\" + format;\n  }\n\n  this._format = format;\n  var templateUrl = resource.getUrlComponent();\n\n  if (!trailingSlashRegex.test(templateUrl)) {\n    templateUrl += \"/\";\n  }\n\n  templateUrl += mapId + \"/{z}/{x}/{y}\" + this._format;\n  resource.url = templateUrl;\n  resource.setQueryParameters({\n    access_token: accessToken\n  });\n  var credit;\n\n  if (defined(options.credit)) {\n    credit = options.credit;\n\n    if (typeof credit === \"string\") {\n      credit = new Credit(credit);\n    }\n  } else {\n    credit = defaultCredit;\n  }\n\n  this._resource = resource;\n  this._imageryProvider = new UrlTemplateImageryProvider({\n    url: resource,\n    credit: credit,\n    ellipsoid: options.ellipsoid,\n    minimumLevel: options.minimumLevel,\n    maximumLevel: options.maximumLevel,\n    rectangle: options.rectangle\n  });\n}\n\nObject.defineProperties(MapboxImageryProvider.prototype, {\n  /**\n   * Gets the URL of the Mapbox server.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  url: {\n    get: function () {\n      return this._imageryProvider.url;\n    }\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function () {\n      return this._imageryProvider.ready;\n    }\n  },\n\n  /**\n   * Gets a promise that resolves to true when the provider is ready for use.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._imageryProvider.readyPromise;\n    }\n  },\n\n  /**\n   * Gets the rectangle, in radians, of the imagery provided by the instance.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Rectangle}\n   * @readonly\n   */\n  rectangle: {\n    get: function () {\n      return this._imageryProvider.rectangle;\n    }\n  },\n\n  /**\n   * Gets the width of each tile, in pixels.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileWidth: {\n    get: function () {\n      return this._imageryProvider.tileWidth;\n    }\n  },\n\n  /**\n   * Gets the height of each tile, in pixels.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileHeight: {\n    get: function () {\n      return this._imageryProvider.tileHeight;\n    }\n  },\n\n  /**\n   * Gets the maximum level-of-detail that can be requested.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  maximumLevel: {\n    get: function () {\n      return this._imageryProvider.maximumLevel;\n    }\n  },\n\n  /**\n   * Gets the minimum level-of-detail that can be requested.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true. Generally,\n   * a minimum level should only be used when the rectangle of the imagery is small\n   * enough that the number of tiles at the minimum level is small.  An imagery\n   * provider with more than a few tiles at the minimum level will lead to\n   * rendering problems.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  minimumLevel: {\n    get: function () {\n      return this._imageryProvider.minimumLevel;\n    }\n  },\n\n  /**\n   * Gets the tiling scheme used by the provider.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {TilingScheme}\n   * @readonly\n   */\n  tilingScheme: {\n    get: function () {\n      return this._imageryProvider.tilingScheme;\n    }\n  },\n\n  /**\n   * Gets the tile discard policy.  If not undefined, the discard policy is responsible\n   * for filtering out \"missing\" tiles via its shouldDiscardImage function.  If this function\n   * returns undefined, no tiles are filtered.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {TileDiscardPolicy}\n   * @readonly\n   */\n  tileDiscardPolicy: {\n    get: function () {\n      return this._imageryProvider.tileDiscardPolicy;\n    }\n  },\n\n  /**\n   * Gets an event that is raised when the imagery provider encounters an asynchronous error..  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Event}\n   * @readonly\n   */\n  errorEvent: {\n    get: function () {\n      return this._imageryProvider.errorEvent;\n    }\n  },\n\n  /**\n   * Gets the credit to display when this imagery provider is active.  Typically this is used to credit\n   * the source of the imagery. This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Credit}\n   * @readonly\n   */\n  credit: {\n    get: function () {\n      return this._imageryProvider.credit;\n    }\n  },\n\n  /**\n   * Gets the proxy used by this provider.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Proxy}\n   * @readonly\n   */\n  proxy: {\n    get: function () {\n      return this._imageryProvider.proxy;\n    }\n  },\n\n  /**\n   * Gets a value indicating whether or not the images provided by this imagery provider\n   * include an alpha channel.  If this property is false, an alpha channel, if present, will\n   * be ignored.  If this property is true, any images without an alpha channel will be treated\n   * as if their alpha is 1.0 everywhere.  When this property is false, memory usage\n   * and texture upload time are reduced.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasAlphaChannel: {\n    get: function () {\n      return this._imageryProvider.hasAlphaChannel;\n    }\n  }\n});\n/**\n * Gets the credits to be displayed when a given tile is displayed.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level;\n * @returns {Credit[]} The credits to be displayed when the tile is displayed.\n *\n * @exception {DeveloperError} <code>getTileCredits</code> must not be called before the imagery provider is ready.\n */\n\nMapboxImageryProvider.prototype.getTileCredits = function (x, y, level) {\n  if (defined(this._accessTokenErrorCredit)) {\n    return [this._accessTokenErrorCredit];\n  }\n};\n/**\n * Requests the image for a given tile.  This function should\n * not be called before {@link MapboxImageryProvider#ready} returns true.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Request} [request] The request object. Intended for internal use only.\n * @returns {Promise.<Image|Canvas>|undefined} A promise for the image that will resolve when the image is available, or\n *          undefined if there are too many active requests to the server, and the request\n *          should be retried later.  The resolved image may be either an\n *          Image or a Canvas DOM object.\n *\n * @exception {DeveloperError} <code>requestImage</code> must not be called before the imagery provider is ready.\n */\n\n\nMapboxImageryProvider.prototype.requestImage = function (x, y, level, request) {\n  return this._imageryProvider.requestImage(x, y, level, request);\n};\n/**\n * Asynchronously determines what features, if any, are located at a given longitude and latitude within\n * a tile.  This function should not be called before {@link MapboxImageryProvider#ready} returns true.\n * This function is optional, so it may not exist on all ImageryProviders.\n *\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Number} longitude The longitude at which to pick features.\n * @param {Number} latitude  The latitude at which to pick features.\n * @return {Promise.<ImageryLayerFeatureInfo[]>|undefined} A promise for the picked features that will resolve when the asynchronous\n *                   picking completes.  The resolved value is an array of {@link ImageryLayerFeatureInfo}\n *                   instances.  The array may be empty if no features are found at the given location.\n *                   It may also be undefined if picking is not supported.\n *\n * @exception {DeveloperError} <code>pickFeatures</code> must not be called before the imagery provider is ready.\n */\n\n\nMapboxImageryProvider.prototype.pickFeatures = function (x, y, level, longitude, latitude) {\n  return this._imageryProvider.pickFeatures(x, y, level, longitude, latitude);\n}; // Exposed for tests\n\n\nMapboxImageryProvider._defaultCredit = defaultCredit;\nexport default MapboxImageryProvider;","map":{"version":3,"sources":["C:/Users/passa/Desktop/WaterDeployTrial/node_modules/cesium/Source/Scene/MapboxImageryProvider.js"],"names":["Credit","defaultValue","defined","DeveloperError","MapboxApi","Resource","UrlTemplateImageryProvider","trailingSlashRegex","defaultCredit","MapboxImageryProvider","options","EMPTY_OBJECT","mapId","resource","createIfNeeded","url","accessToken","getAccessToken","_mapId","_accessToken","_accessTokenErrorCredit","clone","getErrorCredit","format","test","_format","templateUrl","getUrlComponent","setQueryParameters","access_token","credit","_resource","_imageryProvider","ellipsoid","minimumLevel","maximumLevel","rectangle","Object","defineProperties","prototype","get","ready","readyPromise","tileWidth","tileHeight","tilingScheme","tileDiscardPolicy","errorEvent","proxy","hasAlphaChannel","getTileCredits","x","y","level","requestImage","request","pickFeatures","longitude","latitude","_defaultCredit"],"mappings":"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","sourcesContent":["import Credit from \"../Core/Credit.js\";\nimport defaultValue from \"../Core/defaultValue.js\";\nimport defined from \"../Core/defined.js\";\nimport DeveloperError from \"../Core/DeveloperError.js\";\nimport MapboxApi from \"../Core/MapboxApi.js\";\nimport Resource from \"../Core/Resource.js\";\nimport UrlTemplateImageryProvider from \"./UrlTemplateImageryProvider.js\";\n\nvar trailingSlashRegex = /\\/$/;\nvar defaultCredit = new Credit(\n  '&copy; <a href=\"https://www.mapbox.com/about/maps/\">Mapbox</a> &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> <strong><a href=\"https://www.mapbox.com/map-feedback/\">Improve this map</a></strong>'\n);\n\n/**\n * Provides tiled imagery hosted by Mapbox.\n *\n * @alias MapboxImageryProvider\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {String} [options.url='https://api.mapbox.com/v4/'] The Mapbox server url.\n * @param {String} options.mapId The Mapbox Map ID.\n * @param {String} [options.accessToken] The public access token for the imagery.\n * @param {String} [options.format='png'] The format of the image request.\n * @param {Ellipsoid} [options.ellipsoid] The ellipsoid.  If not specified, the WGS84 ellipsoid is used.\n * @param {Number} [options.minimumLevel=0] The minimum level-of-detail supported by the imagery provider.  Take care when specifying\n *                 this that the number of tiles at the minimum level is small, such as four or less.  A larger number is likely\n *                 to result in rendering problems.\n * @param {Number} [options.maximumLevel] The maximum level-of-detail supported by the imagery provider, or undefined if there is no limit.\n * @param {Rectangle} [options.rectangle=Rectangle.MAX_VALUE] The rectangle, in radians, covered by the image.\n * @param {Credit|String} [options.credit] A credit for the data source, which is displayed on the canvas.\n *\n *\n * @example\n * // Mapbox tile provider\n * var mapbox = new Cesium.MapboxImageryProvider({\n *     mapId: 'mapbox.streets',\n *     accessToken: 'thisIsMyAccessToken'\n * });\n *\n * @see {@link https://www.mapbox.com/developers/api/maps/#tiles}\n * @see {@link https://www.mapbox.com/developers/api/#access-tokens}\n */\nfunction MapboxImageryProvider(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  var mapId = options.mapId;\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(mapId)) {\n    throw new DeveloperError(\"options.mapId is required.\");\n  }\n  //>>includeEnd('debug');\n\n  var resource = Resource.createIfNeeded(\n    defaultValue(options.url, \"https://{s}.tiles.mapbox.com/v4/\")\n  );\n\n  var accessToken = MapboxApi.getAccessToken(options.accessToken);\n  this._mapId = mapId;\n  this._accessToken = accessToken;\n\n  this._accessTokenErrorCredit = Credit.clone(\n    MapboxApi.getErrorCredit(options.accessToken)\n  );\n  var format = defaultValue(options.format, \"png\");\n  if (!/\\./.test(format)) {\n    format = \".\" + format;\n  }\n  this._format = format;\n\n  var templateUrl = resource.getUrlComponent();\n  if (!trailingSlashRegex.test(templateUrl)) {\n    templateUrl += \"/\";\n  }\n  templateUrl += mapId + \"/{z}/{x}/{y}\" + this._format;\n  resource.url = templateUrl;\n\n  resource.setQueryParameters({\n    access_token: accessToken,\n  });\n\n  var credit;\n  if (defined(options.credit)) {\n    credit = options.credit;\n    if (typeof credit === \"string\") {\n      credit = new Credit(credit);\n    }\n  } else {\n    credit = defaultCredit;\n  }\n\n  this._resource = resource;\n  this._imageryProvider = new UrlTemplateImageryProvider({\n    url: resource,\n    credit: credit,\n    ellipsoid: options.ellipsoid,\n    minimumLevel: options.minimumLevel,\n    maximumLevel: options.maximumLevel,\n    rectangle: options.rectangle,\n  });\n}\n\nObject.defineProperties(MapboxImageryProvider.prototype, {\n  /**\n   * Gets the URL of the Mapbox server.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  url: {\n    get: function () {\n      return this._imageryProvider.url;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function () {\n      return this._imageryProvider.ready;\n    },\n  },\n\n  /**\n   * Gets a promise that resolves to true when the provider is ready for use.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._imageryProvider.readyPromise;\n    },\n  },\n\n  /**\n   * Gets the rectangle, in radians, of the imagery provided by the instance.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Rectangle}\n   * @readonly\n   */\n  rectangle: {\n    get: function () {\n      return this._imageryProvider.rectangle;\n    },\n  },\n\n  /**\n   * Gets the width of each tile, in pixels.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileWidth: {\n    get: function () {\n      return this._imageryProvider.tileWidth;\n    },\n  },\n\n  /**\n   * Gets the height of each tile, in pixels.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileHeight: {\n    get: function () {\n      return this._imageryProvider.tileHeight;\n    },\n  },\n\n  /**\n   * Gets the maximum level-of-detail that can be requested.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  maximumLevel: {\n    get: function () {\n      return this._imageryProvider.maximumLevel;\n    },\n  },\n\n  /**\n   * Gets the minimum level-of-detail that can be requested.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true. Generally,\n   * a minimum level should only be used when the rectangle of the imagery is small\n   * enough that the number of tiles at the minimum level is small.  An imagery\n   * provider with more than a few tiles at the minimum level will lead to\n   * rendering problems.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  minimumLevel: {\n    get: function () {\n      return this._imageryProvider.minimumLevel;\n    },\n  },\n\n  /**\n   * Gets the tiling scheme used by the provider.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {TilingScheme}\n   * @readonly\n   */\n  tilingScheme: {\n    get: function () {\n      return this._imageryProvider.tilingScheme;\n    },\n  },\n\n  /**\n   * Gets the tile discard policy.  If not undefined, the discard policy is responsible\n   * for filtering out \"missing\" tiles via its shouldDiscardImage function.  If this function\n   * returns undefined, no tiles are filtered.  This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {TileDiscardPolicy}\n   * @readonly\n   */\n  tileDiscardPolicy: {\n    get: function () {\n      return this._imageryProvider.tileDiscardPolicy;\n    },\n  },\n\n  /**\n   * Gets an event that is raised when the imagery provider encounters an asynchronous error..  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Event}\n   * @readonly\n   */\n  errorEvent: {\n    get: function () {\n      return this._imageryProvider.errorEvent;\n    },\n  },\n\n  /**\n   * Gets the credit to display when this imagery provider is active.  Typically this is used to credit\n   * the source of the imagery. This function should\n   * not be called before {@link MapboxImageryProvider#ready} returns true.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Credit}\n   * @readonly\n   */\n  credit: {\n    get: function () {\n      return this._imageryProvider.credit;\n    },\n  },\n\n  /**\n   * Gets the proxy used by this provider.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Proxy}\n   * @readonly\n   */\n  proxy: {\n    get: function () {\n      return this._imageryProvider.proxy;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the images provided by this imagery provider\n   * include an alpha channel.  If this property is false, an alpha channel, if present, will\n   * be ignored.  If this property is true, any images without an alpha channel will be treated\n   * as if their alpha is 1.0 everywhere.  When this property is false, memory usage\n   * and texture upload time are reduced.\n   * @memberof MapboxImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasAlphaChannel: {\n    get: function () {\n      return this._imageryProvider.hasAlphaChannel;\n    },\n  },\n});\n\n/**\n * Gets the credits to be displayed when a given tile is displayed.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level;\n * @returns {Credit[]} The credits to be displayed when the tile is displayed.\n *\n * @exception {DeveloperError} <code>getTileCredits</code> must not be called before the imagery provider is ready.\n */\nMapboxImageryProvider.prototype.getTileCredits = function (x, y, level) {\n  if (defined(this._accessTokenErrorCredit)) {\n    return [this._accessTokenErrorCredit];\n  }\n};\n\n/**\n * Requests the image for a given tile.  This function should\n * not be called before {@link MapboxImageryProvider#ready} returns true.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Request} [request] The request object. Intended for internal use only.\n * @returns {Promise.<Image|Canvas>|undefined} A promise for the image that will resolve when the image is available, or\n *          undefined if there are too many active requests to the server, and the request\n *          should be retried later.  The resolved image may be either an\n *          Image or a Canvas DOM object.\n *\n * @exception {DeveloperError} <code>requestImage</code> must not be called before the imagery provider is ready.\n */\nMapboxImageryProvider.prototype.requestImage = function (x, y, level, request) {\n  return this._imageryProvider.requestImage(x, y, level, request);\n};\n\n/**\n * Asynchronously determines what features, if any, are located at a given longitude and latitude within\n * a tile.  This function should not be called before {@link MapboxImageryProvider#ready} returns true.\n * This function is optional, so it may not exist on all ImageryProviders.\n *\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Number} longitude The longitude at which to pick features.\n * @param {Number} latitude  The latitude at which to pick features.\n * @return {Promise.<ImageryLayerFeatureInfo[]>|undefined} A promise for the picked features that will resolve when the asynchronous\n *                   picking completes.  The resolved value is an array of {@link ImageryLayerFeatureInfo}\n *                   instances.  The array may be empty if no features are found at the given location.\n *                   It may also be undefined if picking is not supported.\n *\n * @exception {DeveloperError} <code>pickFeatures</code> must not be called before the imagery provider is ready.\n */\nMapboxImageryProvider.prototype.pickFeatures = function (\n  x,\n  y,\n  level,\n  longitude,\n  latitude\n) {\n  return this._imageryProvider.pickFeatures(x, y, level, longitude, latitude);\n};\n\n// Exposed for tests\nMapboxImageryProvider._defaultCredit = defaultCredit;\nexport default MapboxImageryProvider;\n"]},"metadata":{},"sourceType":"module"}